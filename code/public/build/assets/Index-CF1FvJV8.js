import{r as f,B as C,e as J,c as x,o as l,w as h,a as e,t as r,b as u,u as m,l as k,d as p,h as b,i as v,k as B,n as w,F as V,j as D,D as S,p as T}from"./app-CapNgXf-.js";import{_ as I}from"./Layout-BAHf2dOa.js";import{P as _}from"./PrettyButton-C7IwNjfl.js";import{P as N}from"./PrettySpan-CCXc1kgI.js";import{T as P}from"./TextInput-C8RADZPb.js";import{E}from"./Errors-ClHFmp7Z.js";import{_ as F}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./createLucideIcon-jKXsEGte.js";const A={class:"bg-white dark:bg-gray-900 sm:mt-20 sm:border-b"},O={class:"max-w-8xl mx-auto hidden px-4 py-2 sm:px-6 md:block"},q={class:"flex items-baseline justify-between space-x-6"},z={class:"text-sm"},K={class:"me-2 inline text-gray-600 dark:text-gray-400"},L={class:"me-2 inline"},R={class:"relative me-2 inline"},U={class:"inline"},Y={class:"sm:mt-18 relative"},G={class:"mx-auto max-w-4xl px-2 py-2 sm:px-6 sm:py-6 lg:px-8"},H={class:"mb-6 flex items-center justify-between"},Q={class:"border-b border-gray-200 p-5 dark:border-gray-700"},W={class:"flex justify-between p-5"},X={key:1},Z={class:"metric-list mb-6 rounded-lg border border-gray-200 bg-white dark:border-gray-700 dark:bg-gray-900"},ee={class:"text-sm"},te=["onClick"],ae={key:2,class:"mb-6 rounded-lg border border-gray-200 bg-white dark:border-gray-700 dark:bg-gray-900"},se=["alt"],re={class:"px-5 pb-5 pt-2 text-center"},le={__name:"Index",props:{layoutData:Object,data:Object},setup(o){const g=o,n=f(g.data.journalMetrics),c=f(""),y=C("newJournalMetric"),i=f(!1),d=J({label:""}),j=()=>{d.label="",i.value=!0,S().then(()=>y.value.focus())},$=()=>{c.value="loading",axios.post(g.data.url.store,d).then(a=>{i.value=!1,c.value="",n.value.unshift(a.data.data)}).catch(()=>{c.value=""})},M=a=>{confirm(T("Are you sure? This action cannot be undone."))&&axios.delete(a.url.destroy).then(()=>{var t=n.value.findIndex(s=>s.id===a.id);n.value.splice(t,1)}).catch(t=>{c.value=null,d.errors=t.response.data})};return(a,t)=>(l(),x(I,{"layout-data":o.layoutData,"inside-vault":!0},{default:h(()=>[e("nav",A,[e("div",O,[e("div",q,[e("ul",z,[e("li",K,r(a.$t("You are here:")),1),e("li",L,[u(m(k),{href:o.layoutData.vault.url.journals,class:"text-blue-500 hover:underline"},{default:h(()=>[p(r(a.$t("Journals")),1)]),_:1},8,["href"])]),t[4]||(t[4]=e("li",{class:"relative me-2 inline"},[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"icon-breadcrumb relative inline h-3 w-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"})])],-1)),e("li",R,[u(m(k),{href:o.data.journal.url.show,class:"text-blue-500 hover:underline"},{default:h(()=>[p(r(o.data.journal.name),1)]),_:1},8,["href"])]),t[5]||(t[5]=e("li",{class:"relative me-2 inline"},[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"icon-breadcrumb relative inline h-3 w-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"})])],-1)),e("li",U,r(a.$t("Journal metrics")),1)])])])]),e("main",Y,[e("div",G,[e("div",H,[e("h3",null,[t[6]||(t[6]=e("span",{class:"me-1"}," ðŸ“Š ",-1)),p(" "+r(a.$t("All journal metrics in :name",{name:o.data.journal.name})),1)]),i.value?v("",!0):(l(),x(_,{key:0,onClick:j,text:a.$t("Create a journal metric"),icon:"plus"},null,8,["text"]))]),i.value?(l(),b("form",{key:0,class:"mb-6 rounded-lg border border-gray-200 bg-white dark:border-gray-700 dark:bg-gray-900",onSubmit:t[3]||(t[3]=B(s=>$(),["prevent"]))},[e("div",Q,[u(E,{errors:m(d).errors},null,8,["errors"]),u(P,{ref_key:"newJournalMetric",ref:y,modelValue:m(d).label,"onUpdate:modelValue":t[0]||(t[0]=s=>m(d).label=s),label:a.$t("Name"),type:"text",autofocus:!0,"input-class":"block w-full",required:!0,autocomplete:!1,maxlength:255,onEscKeyPressed:t[1]||(t[1]=s=>i.value=!1)},null,8,["modelValue","label"])]),e("div",W,[u(N,{text:a.$t("Cancel"),class:w("me-3"),onClick:t[2]||(t[2]=s=>i.value=!1)},null,8,["text"]),u(_,{text:a.$t("Save"),state:c.value,icon:"plus",class:w("save")},null,8,["text","state"])])],32)):v("",!0),n.value.length!==0?(l(),b("div",X,[e("ul",Z,[(l(!0),b(V,null,D(n.value,s=>(l(),b("li",{key:s.id,class:"flex items-center justify-between border-b border-gray-200 px-5 py-4 hover:bg-slate-50 dark:border-gray-700 dark:bg-slate-900 dark:hover:bg-slate-800"},[e("span",null,r(s.label),1),e("ul",ee,[e("li",{class:"inline cursor-pointer text-red-500 hover:text-red-900",onClick:oe=>M(s)},r(a.$t("Delete")),9,te)])]))),128))])])):v("",!0),n.value.length===0?(l(),b("div",ae,[e("img",{src:"/img/journal_blank_index.svg",alt:a.$t("Journal"),class:"mx-auto mt-4 h-44 w-44"},null,8,se),e("p",re,r(a.$t("Journal metrics let you track data accross all your journal entries.")),1)])):v("",!0)])])]),_:1},8,["layout-data"]))}},fe=F(le,[["__scopeId","data-v-d1f24917"]]);export{fe as default};
