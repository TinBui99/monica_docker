import{l as B,L as u,h as l,o as r,a,i as d,b as n,t as m,n as b,k as x,c as N,F as y,j as p,w as j,d as g,x as S,ay as M}from"./app-CapNgXf-.js";import{H as U}from"./HoverMenu-5Cb05m1q.js";import{P as D}from"./PrettyButton-C7IwNjfl.js";import{P as L}from"./PrettySpan-CCXc1kgI.js";import{T as q}from"./TextInput-C8RADZPb.js";import{T as H}from"./TextArea-Bj3iknHw.js";import{E as A}from"./Errors-ClHFmp7Z.js";import{_ as z}from"./Avatar-BYmVGbiJ.js";import{_ as K}from"./Pagination-Bti8hVNu.js";import{_ as O}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{C as R}from"./calendar-days-CHV_SxXd.js";import{c as G}from"./createLucideIcon-jKXsEGte.js";/**
 * @license lucide-vue-next v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J=G("notebook-pen",[["path",{d:"M13.4 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-7.4",key:"re6nr2"}],["path",{d:"M2 6h4",key:"aawbzj"}],["path",{d:"M2 10h4",key:"l0bgd4"}],["path",{d:"M2 14h4",key:"1gsvsf"}],["path",{d:"M2 18h4",key:"1bu2t1"}],["path",{d:"M21.378 5.626a1 1 0 1 0-3.004-3.004l-5.01 5.012a2 2 0 0 0-.506.854l-.837 2.87a.5.5 0 0 0 .62.62l2.87-.837a2 2 0 0 0 .854-.506z",key:"pqwjuv"}]]),Q={components:{InertiaLink:B,HoverMenu:U,PrettyButton:D,PrettySpan:L,TextInput:q,TextArea:H,Errors:A,Avatar:z,Pagination:K,NotebookPen:J,CalendarDays:R},props:{data:{type:Object,default:null},paginator:{type:Object,default:null},moduleMode:{type:Boolean,default:!0}},data(){return{loadingState:"",titleFieldShown:!1,emotionFieldShown:!1,createNoteModalShown:!1,localNotes:[],editedNoteId:0,form:{title:"",body:"",emotion:"",errors:[]}}},created(){this.localNotes=this.data.notes},methods:{showCreateNoteModal(){this.form.errors=[],this.form.title="",this.form.body="",this.createNoteModalShown=!0},showEmotionField(){this.form.emotion="",this.emotionFieldShown=!0},showEditNoteModal(t){this.editedNoteId=t.id,this.form.title=t.title,this.form.body=t.body,this.form.emotion=t.emotion?.id},showTitleField(){this.titleFieldShown=!0,this.form.title="",this.$nextTick().then(()=>{this.$refs.newTitle.focus()})},showFullBody(t){this.localNotes[this.localNotes.findIndex(o=>o.id===t.id)].show_full_content=!0},submit(){this.loadingState="loading",axios.post(this.data.url.store,this.form).then(t=>{this.flash(this.$t("The note has been created"),"success"),this.localNotes.unshift(t.data.data),this.loadingState="",this.createNoteModalShown=!1}).catch(t=>{this.loadingState="",this.form.errors=t.response.data})},update(t){this.loadingState="loading",axios.put(t.url.update,this.form).then(o=>{this.loadingState="",this.flash(this.$t("The note has been updated"),"success"),this.localNotes[this.localNotes.findIndex(c=>c.id===t.id)]=o.data.data,this.editedNoteId=0}).catch(o=>{this.loadingState="",this.form.errors=o.response.data})},destroy(t){confirm(this.$t("Are you sure? This action cannot be undone."))&&axios.delete(t.url.destroy).then(()=>{this.flash(this.$t("The note has been deleted"),"success");var o=this.localNotes.findIndex(c=>c.id===t.id);this.localNotes.splice(o,1)}).catch(o=>{this.loadingState=null,this.form.errors=o.response.data})}}},W={class:"mb-10"},X={class:"mb-3 items-center justify-between border-b border-gray-200 pb-2 dark:border-gray-700 sm:flex"},Y={class:"mb-2 sm:mb-0 flex items-center gap-2"},Z={class:"font-semibold"},$={class:"border-b border-gray-200 p-5 dark:border-gray-700"},ee={key:1,class:"mt-2 block w-full"},te={class:"mb-2"},oe=["id","onUpdate:modelValue","value"],se=["for"],re={class:"flex justify-between p-5"},le={key:1},ae={key:0},ie={key:0,class:"border-b border-gray-200 p-3 text-xs font-semibold text-gray-600 dark:border-gray-700 dark:text-gray-400"},de={key:1,class:"p-3"},ne=["onClick"],me={key:2,class:"p-3 whitespace-pre-line"},ue={class:"flex justify-between border-t border-gray-200 px-3 py-1 text-xs text-gray-600 hover:rounded-b hover:bg-slate-50 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-slate-900"},ce={class:"flex items-center gap-4"},he={key:0,class:"relative me-3 inline"},be={class:"relative flex items-center gap-1"},fe={key:1,class:"relative me-3 inline"},ye={class:"icon-avatar flex items-center gap-1"},pe=["onSubmit"],ge={class:"border-b border-gray-200 p-5 dark:border-gray-700"},ke={key:0,class:"mt-2 block w-full"},_e=["id","onUpdate:modelValue","value"],ve=["for"],we={class:"flex justify-between p-5"},xe={key:0,class:"text-center"},Ne={key:2,class:"mb-6 rounded-lg border border-gray-200 bg-white dark:border-gray-700 dark:bg-gray-900"},Se=["alt"],Me={class:"px-5 pb-5 pt-2 text-center"};function Ve(t,o,c,Ce,s,h){const V=u("NotebookPen"),f=u("pretty-button"),k=u("errors"),_=u("text-area"),v=u("text-input"),w=u("pretty-span"),C=u("CalendarDays"),T=u("avatar"),F=u("hover-menu"),I=u("InertiaLink"),E=u("Pagination");return r(),l("div",W,[a("div",X,[a("div",Y,[n(V,{class:"h-4 w-4 text-gray-600"}),a("span",Z,m(t.$t("Notes")),1)]),n(f,{text:t.$t("Add a note"),icon:"plus",class:b("w-full sm:w-fit"),onClick:h.showCreateNoteModal},null,8,["text","onClick"])]),s.createNoteModalShown?(r(),l("form",{key:0,class:"mb-6 rounded-lg border border-gray-200 bg-gray-50 dark:border-gray-700 dark:bg-gray-900",onSubmit:o[6]||(o[6]=x(e=>h.submit(),["prevent"]))},[a("div",$,[n(k,{errors:s.form.errors},null,8,["errors"]),n(_,{modelValue:s.form.body,"onUpdate:modelValue":o[0]||(o[0]=e=>s.form.body=e),label:t.$t("Body"),rows:10,required:!0,maxlength:65535,markdown:!0,"textarea-class":"block w-full mb-3"},null,8,["modelValue","label"]),s.titleFieldShown?(r(),N(v,{key:0,ref:"newTitle",modelValue:s.form.title,"onUpdate:modelValue":o[1]||(o[1]=e=>s.form.title=e),label:t.$t("Title"),type:"text","input-class":"block w-full mb-3",required:!1,autocomplete:!1,maxlength:255,onEscKeyPressed:o[2]||(o[2]=e=>s.createNoteModalShown=!1)},null,8,["modelValue","label"])):d("",!0),s.emotionFieldShown?(r(),l("div",ee,[a("p",te,m(t.$t("How did you feel?")),1),(r(!0),l(y,null,p(c.data.emotions,e=>(r(),l("div",{key:e.id,class:"mb-2 flex items-center"},[S(a("input",{id:e.type,"onUpdate:modelValue":i=>s.form.emotion=i,value:e.id,name:"emotion",type:"radio",class:"h-4 w-4 border-gray-300 text-indigo-600 focus:ring-indigo-500 dark:border-gray-700 dark:bg-slate-900 dark:text-indigo-400"},null,8,oe),[[M,s.form.emotion]]),a("label",{for:e.type,class:"ms-2 block font-medium text-gray-700 dark:text-gray-300"},m(e.name),9,se)]))),128))])):d("",!0),s.titleFieldShown?d("",!0):(r(),l("span",{key:2,class:"me-2 inline-block cursor-pointer rounded-lg border bg-slate-200 px-1 py-1 text-xs hover:bg-slate-300 dark:border-gray-700 dark:bg-slate-800 dark:hover:bg-slate-700",onClick:o[3]||(o[3]=(...e)=>h.showTitleField&&h.showTitleField(...e))},m(t.$t("+ add title")),1)),s.emotionFieldShown?d("",!0):(r(),l("span",{key:3,class:"inline-block cursor-pointer rounded-lg border bg-slate-200 px-1 py-1 text-xs hover:bg-slate-300 dark:border-gray-700 dark:bg-slate-800 dark:hover:bg-slate-700",onClick:o[4]||(o[4]=(...e)=>h.showEmotionField&&h.showEmotionField(...e))},m(t.$t("+ add emotion")),1))]),a("div",re,[n(w,{text:t.$t("Cancel"),class:b("me-3"),onClick:o[5]||(o[5]=e=>s.createNoteModalShown=!1)},null,8,["text"]),n(f,{text:t.$t("Save"),state:s.loadingState,icon:"check",class:b("save")},null,8,["text","state"])])],32)):d("",!0),s.localNotes.length>0?(r(),l("div",le,[(r(!0),l(y,null,p(s.localNotes,e=>(r(),l("div",{key:e.id,class:"mb-4 rounded-xs border border-gray-200 last:mb-0 dark:border-gray-700 dark:bg-gray-900"},[s.editedNoteId!==e.id?(r(),l("div",ae,[e.title?(r(),l("div",ie,m(e.title),1)):d("",!0),!e.show_full_content&&e.body_excerpt?(r(),l("div",de,[g(m(e.body_excerpt)+" ",1),a("span",{class:"cursor-pointer text-blue-500 hover:underline",onClick:i=>h.showFullBody(e)},m(t.$t("View all")),9,ne)])):(r(),l("div",me,m(e.body),1)),a("div",ue,[a("div",ce,[e.emotion?(r(),l("div",he,m(e.emotion.name),1)):d("",!0),a("div",be,[n(C,{class:"h-3 w-3"}),g(" "+m(e.written_at),1)]),e.author?(r(),l("div",fe,[a("div",ye,[n(T,{data:e.author.avatar,class:b("h-3 w-3 rounded-full")},null,8,["data"]),a("span",null,m(e.author.name),1)])])):d("",!0)]),a("div",null,[n(F,{"show-edit":!0,"show-delete":!0,onEdit:i=>h.showEditNoteModal(e),onDelete:i=>h.destroy(e)},null,8,["onEdit","onDelete"])])])])):d("",!0),s.editedNoteId===e.id?(r(),l("form",{key:1,class:"bg-gray-50 dark:bg-gray-900",onSubmit:x(i=>h.update(e),["prevent"])},[a("div",ge,[n(k,{errors:s.form.errors},null,8,["errors"]),n(_,{modelValue:s.form.body,"onUpdate:modelValue":o[7]||(o[7]=i=>s.form.body=i),label:t.$t("Body"),rows:10,required:!0,maxlength:65535,markdown:!0,"textarea-class":"block w-full mb-3"},null,8,["modelValue","label"]),n(v,{ref_for:!0,ref:"newTitle",modelValue:s.form.title,"onUpdate:modelValue":o[8]||(o[8]=i=>s.form.title=i),label:t.$t("Title"),type:"text","input-class":"block w-full",required:!1,autocomplete:!1,maxlength:255,onEscKeyPressed:o[9]||(o[9]=i=>s.editedNoteId=0)},null,8,["modelValue","label"]),s.form.emotion?(r(),l("div",ke,[o[11]||(o[11]=a("p",{class:"mb-2"},"How did you feel?",-1)),(r(!0),l(y,null,p(c.data.emotions,i=>(r(),l("div",{key:i.id,class:"mb-2 flex items-center"},[S(a("input",{id:i.type,"onUpdate:modelValue":P=>s.form.emotion=P,value:i.id,name:"emotion",type:"radio",class:"h-4 w-4 border-gray-300 text-indigo-600 focus:ring-indigo-500 dark:text-indigo-400"},null,8,_e),[[M,s.form.emotion]]),a("label",{for:i.type,class:"ms-2 block font-medium text-gray-700 dark:text-gray-300"},m(i.name),9,ve)]))),128))])):d("",!0)]),a("div",we,[n(w,{text:t.$t("Cancel"),class:b("me-3"),onClick:o[10]||(o[10]=i=>s.editedNoteId=0)},null,8,["text"]),n(f,{text:t.$t("Update"),state:s.loadingState,icon:"check",class:b("save")},null,8,["text","state"])])],40,pe)):d("",!0)]))),128)),c.moduleMode?(r(),l("div",xe,[n(I,{href:c.data.url.index,class:"rounded-xs border border-gray-200 px-3 py-1 text-sm text-blue-500 hover:border-gray-500 dark:border-gray-700"},{default:j(()=>[g(m(t.$t("View all")),1)]),_:1},8,["href"])])):d("",!0),c.moduleMode?d("",!0):(r(),N(E,{key:1,items:c.paginator},null,8,["items"]))])):d("",!0),s.localNotes.length===0?(r(),l("div",Ne,[a("img",{src:"/img/contact_blank_note.svg",alt:t.$t("Notes"),class:"mx-auto mt-4 h-14 w-14"},null,8,Se),a("p",Me,m(t.$t("There are no notes yet.")),1)])):d("",!0)])}const Ae=O(Q,[["render",Ve],["__scopeId","data-v-f2b192d0"]]);export{Ae as N};
