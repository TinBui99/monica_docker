import{_ as u}from"./WaitForKey-BYvq9w9Y.js";import{s as f}from"./startAuthentication-BTaWR7aw.js";import{M as l,h,i as d,o as g,b as _,U as n,D as t}from"./app-CapNgXf-.js";import"./Button-CeJKJvkU.js";import"./createLucideIcon-jKXsEGte.js";const b={key:0},N={__name:"WebauthnTest",emits:["success"],setup(k,{expose:c,emit:i}){const p=i,e=l({error:"",hasErrors:!1,started:!1,processing:!1}),a=()=>{e.started=!0,e.error="",e.hasErrors=!1,e.processing=!1,n.post(route("webauthn.auth.options")).then(s=>{s.data!==void 0?o(s.data.publicKey):t().then(()=>o(s.props.publicKey))}).catch(s=>{e.processing=!1,s.response.data.errors===void 0?e.error=s.response.data.message:e.error=s.response.data.errors[0],e.hasErrors=!0})},o=s=>{e.processing=!0,t().then(()=>f({optionsJSON:s})).then(r=>m(r)).catch(r=>{e.processing=!1,e.error=r.message,e.hasErrors=!0})},m=s=>{n.post(route("webauthn.key.confirm"),s).then(()=>{e.started=!1,e.processing=!1,t().then(()=>p("success"))}).catch(r=>{e.processing=!1,e.error=r.response.data.message,e.hasErrors=!0})};return c({start:a}),(s,r)=>e.started?(g(),h("div",b,[_(u,{class:"mt-4","error-message":e.error,form:e,onRetry:r[0]||(r[0]=y=>a())},null,8,["error-message","form"])])):d("",!0)}};export{N as default};
