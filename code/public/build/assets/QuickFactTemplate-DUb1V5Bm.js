import{r as f,B as P,e as T,h as p,o as d,a,i as h,c as I,d as N,t as v,k as g,b as o,u as i,n as y,w as j,D as V}from"./app-CapNgXf-.js";import{P as k}from"./PrettyButton-C7IwNjfl.js";import{P as w}from"./PrettySpan-CCXc1kgI.js";import{T as _}from"./TextInput-C8RADZPb.js";import{E as C}from"./Errors-ClHFmp7Z.js";import{d as q}from"./vuedraggable.umd-BpKQmSSe.js";import{_ as Q}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./createLucideIcon-jKXsEGte.js";const D={class:"mb-12"},F={class:"mb-3 mt-8 items-center justify-between sm:mt-0 sm:flex"},R={class:"mb-4 sm:mb-0"},A={class:"border-b border-gray-200 p-5 dark:border-gray-700"},K={class:"flex justify-between p-5"},U={key:1,class:"mb-6 rounded-lg border border-gray-200 bg-white dark:border-gray-700 dark:bg-gray-900"},z={key:0,class:"item-list flex items-center justify-between border-b border-gray-200 py-2 pe-5 ps-4 hover:bg-slate-50 dark:border-gray-700 dark:bg-slate-900 dark:hover:bg-slate-800"},O={class:"me-2 flex"},G={class:"text-sm"},J=["onClick"],L={class:"text-blue-500 hover:underline"},W=["onClick"],X=["onSubmit"],Y={class:"border-b border-gray-200 p-5 dark:border-gray-700"},ee={class:"flex justify-between p-5"},te={key:2},ae={class:"p-5 text-center"},le={__name:"QuickFactTemplate",props:{data:Object},setup($){const x=$,r=f(!1),u=f(!1),m=f(0),n=f(x.data.quick_fact_templates),b=P("newEntry"),l=T({label:"",position:"",errors:[]}),H=()=>{l.label="",l.position="",u.value=!0,V().then(()=>b.value.focus())},E=t=>{l.label=t.label,m.value=t.id,V().then(()=>b.value.focus())},M=()=>{r.value="loading",axios.post(x.data.url.quick_fact_templates_store,l).then(t=>{n.value.unshift(t.data.data),r.value=null,u.value=!1}).catch(t=>{r.value=null,l.errors=t.response.data})},Z=t=>{r.value="loading",axios.put(t.url.update,l).then(e=>{n.value[n.value.findIndex(s=>s.id===t.id)]=e.data.data,r.value=null,m.value=0}).catch(e=>{r.value=null,l.errors=e.response.data})},S=t=>{axios.delete(t.url.destroy).then(()=>{var e=n.value.findIndex(s=>s.id===t.id);n.value.splice(e,1)}).catch(e=>{r.value=null,l.errors=e.response.data})},B=t=>{l.position=t.moved.newIndex+1,axios.put(t.moved.element.url.position,l).catch(e=>{r.value=null,l.errors=e.response.data})};return(t,e)=>(d(),p("div",D,[a("div",F,[a("h3",R,[e[7]||(e[7]=a("span",{class:"me-1"}," ðŸ§‘â€ðŸ­ ",-1)),N(" "+v(t.$t("Quick facts template")),1)]),u.value?h("",!0):(d(),I(k,{key:0,text:t.$t("Add an entry"),icon:"plus",onClick:H},null,8,["text"]))]),u.value?(d(),p("form",{key:0,class:"mb-6 rounded-lg border border-gray-200 bg-white dark:border-gray-700 dark:bg-gray-900",onSubmit:e[3]||(e[3]=g(s=>M(),["prevent"]))},[a("div",A,[o(C,{errors:i(l).errors},null,8,["errors"]),o(_,{ref_key:"newEntry",ref:b,modelValue:i(l).label,"onUpdate:modelValue":e[0]||(e[0]=s=>i(l).label=s),label:t.$t("Name"),type:"text",autofocus:!0,"input-class":"block w-full",required:!0,autocomplete:!1,maxlength:255,onEscKeyPressed:e[1]||(e[1]=s=>u.value=!1)},null,8,["modelValue","label"])]),a("div",K,[o(w,{text:t.$t("Cancel"),class:y("me-3"),onClick:e[2]||(e[2]=s=>u.value=!1)},null,8,["text"]),o(k,{text:t.$t("Save"),state:r.value,icon:"plus",class:y("save")},null,8,["text","state"])])],32)):h("",!0),n.value.length>0?(d(),p("div",U,[o(i(q),{list:n.value,"item-key":"id","component-data":{name:"fade"},handle:".handle",onChange:B},{item:j(({element:s})=>[m.value!==s.id?(d(),p("div",z,[a("div",O,[e[8]||(e[8]=a("svg",{class:"handle me-2 cursor-move",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[a("path",{d:"M7 7H9V9H7V7Z",fill:"currentColor"}),a("path",{d:"M11 7H13V9H11V7Z",fill:"currentColor"}),a("path",{d:"M17 7H15V9H17V7Z",fill:"currentColor"}),a("path",{d:"M7 11H9V13H7V11Z",fill:"currentColor"}),a("path",{d:"M13 11H11V13H13V11Z",fill:"currentColor"}),a("path",{d:"M15 11H17V13H15V11Z",fill:"currentColor"}),a("path",{d:"M9 15H7V17H9V15Z",fill:"currentColor"}),a("path",{d:"M11 15H13V17H11V15Z",fill:"currentColor"}),a("path",{d:"M17 15H15V17H17V15Z",fill:"currentColor"})],-1)),a("span",null,v(s.label),1)]),a("ul",G,[a("li",{class:"inline cursor-pointer",onClick:c=>E(s)},[a("span",L,v(t.$t("Rename")),1)],8,J),a("li",{class:"ms-4 inline cursor-pointer text-red-500 hover:text-red-900",onClick:c=>S(s)},v(t.$t("Delete")),9,W)])])):(d(),p("form",{key:1,class:"item-list border-b border-gray-200 hover:bg-slate-50 dark:border-gray-700 dark:bg-slate-900 dark:hover:bg-slate-800",onSubmit:g(c=>Z(s),["prevent"])},[a("div",Y,[o(C,{errors:i(l).errors},null,8,["errors"]),o(_,{ref_key:"newEntry",ref:b,modelValue:i(l).label,"onUpdate:modelValue":e[4]||(e[4]=c=>i(l).label=c),label:t.$t("Name"),type:"text",autofocus:!0,"input-class":"block w-full",required:!0,autocomplete:!1,maxlength:255,onEscKeyPressed:e[5]||(e[5]=c=>m.value=0)},null,8,["modelValue","label"])]),a("div",ee,[o(w,{text:t.$t("Cancel"),class:y("me-3"),onClick:e[6]||(e[6]=g(c=>m.value=0,["prevent"]))},null,8,["text"]),o(k,{text:t.$t("Rename"),state:r.value,icon:"check",class:y("save")},null,8,["text","state"])])],40,X))]),_:1},8,["list"])])):h("",!0),n.value.length===0?(d(),p("div",te,[a("p",ae,v(t.$t("Quick facts let you document interesting facts about a contact.")),1)])):h("",!0)]))}},pe=Q(le,[["__scopeId","data-v-dfe0848e"]]);export{pe as default};
