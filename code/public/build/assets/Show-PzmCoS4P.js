import{l as G,L as i,c as T,o as l,w as u,a as e,t as o,b as d,d as f,h as n,i as h,k as $,n as x,F as v,j as y}from"./app-CapNgXf-.js";import{_ as j}from"./Layout-BAHf2dOa.js";import{T as L}from"./TextInput-C8RADZPb.js";import{P as B}from"./PrettyButton-C7IwNjfl.js";import{P as D}from"./PrettySpan-CCXc1kgI.js";import{_ as N}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{A as S}from"./index-C2abvfVx.js";import"./createLucideIcon-jKXsEGte.js";const V={components:{InertiaLink:G,ATooltip:S,Layout:j,TextInput:L,PrettyButton:B,PrettySpan:D},props:{layoutData:{type:Object,default:null},data:{type:Object,default:null}},data(){return{loadingState:"",localGoal:[],editMode:!1,form:{name:"",errors:[]}}},created(){this.localGoal=this.data},methods:{showEditModal(){this.editMode=!0,this.form.name=this.localGoal.name,this.$nextTick().then(()=>{this.$refs.newName.focus()})},update(){axios.put(this.localGoal.url.update,this.form).then(t=>{this.flash(this.$t("The goal has been updated"),"success"),this.localGoal=t.data.data,this.editMode=!1}).catch(t=>{this.form.errors=t.response.data})},destroy(){confirm(this.$t("Are you sure? This will delete the goal and all the streaks permanently."))&&axios.delete(this.localGoal.url.destroy).then(t=>{localStorage.success=this.$t("The goal has been deleted"),this.$inertia.visit(t.data.data)}).catch(t=>{this.form.errors=t.response.data})}}},P={class:"bg-white dark:bg-gray-900 sm:mt-20 sm:border-b"},I={class:"max-w-8xl mx-auto hidden px-4 py-2 sm:px-6 md:block"},E={class:"flex items-baseline justify-between space-x-6"},A={class:"text-sm"},F={class:"me-2 inline text-gray-600 dark:text-gray-400"},O={class:"me-2 inline"},U={class:"me-2 inline"},q={class:"inline"},z={class:"sm:mt-18 relative"},K={class:"mx-auto max-w-5xl px-2 py-2 sm:px-6 sm:py-6 lg:px-8"},R={class:"special-grid grid grid-cols-1 gap-6 sm:grid-cols-3"},Y={class:"p-3 sm:px-3 sm:py-0"},H={key:0,class:"mb-4 font-semibold"},J={class:"border-b border-gray-200 p-5 dark:border-gray-700"},Q={class:"flex justify-between p-5"},W={class:"mb-6 flex justify-between rounded-xs border border-gray-200 p-3 dark:border-gray-700"},X={class:"me-6 flex items-center"},Z={class:"me-3 w-14 text-right text-sm text-gray-500"},ee={class:"text-4xl"},te={class:"me-6 flex items-center"},se={class:"me-3 w-14 text-right text-sm text-gray-500"},oe={class:"text-4xl"},ae={class:"flex items-center"},re={class:"me-3 w-14 text-right text-sm text-gray-500"},le={class:"text-4xl"},ne={class:"mb-2 text-xs"},ie={class:"grid-calendar grid"},de={key:0,class:"h-3 w-3 cursor-pointer rounded-xs border border-transparent bg-green-400 hover:border-green-500"},ce={key:1,class:"h-3 w-3 cursor-pointer rounded-xs bg-slate-200"};function me(t,s,m,ue,a,p){const _=i("InertiaLink"),g=i("errors"),b=i("text-input"),k=i("pretty-span"),w=i("pretty-button"),C=i("a-tooltip"),M=i("layout");return l(),T(M,{"layout-data":m.layoutData,"inside-vault":!0},{default:u(()=>[e("nav",P,[e("div",I,[e("div",E,[e("ul",A,[e("li",F,o(t.$t("You are here:")),1),e("li",O,[d(_,{href:m.layoutData.vault.url.contacts,class:"text-blue-500 hover:underline"},{default:u(()=>[f(o(t.$t("Contacts")),1)]),_:1},8,["href"])]),s[6]||(s[6]=e("li",{class:"relative me-2 inline"},[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"icon-breadcrumb relative inline h-3 w-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"})])],-1)),e("li",U,[d(_,{href:m.data.url.contact,class:"text-blue-500 hover:underline"},{default:u(()=>[f(o(t.$t("Profile of :name",{name:m.data.contact.name})),1)]),_:1},8,["href"])]),s[7]||(s[7]=e("li",{class:"relative me-2 inline"},[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"icon-breadcrumb relative inline h-3 w-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"})])],-1)),e("li",q,o(t.$t("Detail of a goal")),1)])])])]),e("main",z,[e("div",K,[e("div",R,[e("div",null,[e("div",{onClick:s[0]||(s[0]=r=>p.showEditModal()),class:"cursor-pointer text-blue-500 hover:underline"},o(t.$t("Rename")),1),e("div",{onClick:s[1]||(s[1]=r=>p.destroy()),class:"cursor-pointer text-blue-500 hover:underline"},o(t.$t("Delete")),1)]),e("div",Y,[a.editMode?h("",!0):(l(),n("h1",H,o(a.localGoal.name),1)),a.editMode?(l(),n("form",{key:1,class:"mb-4 rounded-lg border border-gray-200 bg-gray-50 dark:border-gray-700 dark:bg-gray-900",onSubmit:s[5]||(s[5]=$(r=>p.update(),["prevent"]))},[e("div",J,[d(g,{errors:a.form.errors},null,8,["errors"]),d(b,{ref:"newName",modelValue:a.form.name,"onUpdate:modelValue":s[2]||(s[2]=r=>a.form.name=r),label:t.$t("Name"),type:"text","input-class":"block w-full",required:!0,autocomplete:!1,maxlength:255,onEscKeyPressed:s[3]||(s[3]=r=>a.editMode=!1)},null,8,["modelValue","label"])]),e("div",Q,[d(k,{text:t.$t("Cancel"),class:x("me-3"),onClick:s[4]||(s[4]=r=>a.editMode=!1)},null,8,["text"]),d(w,{text:t.$t("Update"),state:a.loadingState,icon:"check",class:x("save")},null,8,["text","state"])])],32)):h("",!0),e("div",W,[e("div",X,[e("div",Z,o(t.$t("Total streaks")),1),e("div",ee,o(a.localGoal.count),1)]),e("div",te,[e("div",se,o(t.$t("Current streak")),1),e("div",oe,o(a.localGoal.streaks_statistics.current_streak),1)]),e("div",ae,[e("div",re,o(t.$t("Longest streak")),1),e("div",le,o(a.localGoal.streaks_statistics.max_streak),1)])]),e("p",ne,o(t.$t("Details in the last year")),1),e("div",ie,[(l(!0),n(v,null,y(a.localGoal.weeks,r=>(l(),n("div",{key:r.id},[(l(!0),n(v,null,y(r.streaks,c=>(l(),n("div",{key:c.id},[d(C,{placement:"topLeft",title:c.date,"arrow-point-at-center":""},{default:u(()=>[!c.not_yet_happened&&c.streak?(l(),n("div",de)):h("",!0),!c.not_yet_happened&&!c.streak?(l(),n("div",ce)):h("",!0)]),_:2},1032,["title"])]))),128))]))),128))])])])])])]),_:1},8,["layout-data"])}const be=N(V,[["render",me],["__scopeId","data-v-9a9cd96a"]]);export{be as default};
