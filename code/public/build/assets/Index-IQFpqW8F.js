import{r as x,s as L,z as Y,M as G,c as S,o as r,w as y,a as l,t as n,b as s,u as A,l as B,d as w,h as d,i as v,k as $,n as h,F as P,j as M,m as E,p as j}from"./app-CapNgXf-.js";import{_ as H}from"./Layout-BAHf2dOa.js";import{P as C}from"./PrettyButton-C7IwNjfl.js";import{P as D}from"./PrettySpan-CCXc1kgI.js";import{T as _}from"./TextInput-C8RADZPb.js";import{E as N}from"./Errors-ClHFmp7Z.js";import{_ as J}from"./ConfirmationModal-C4kmuD-S.js";import{D as Q}from"./Dropdown-C6O7kLlt.js";import{_ as R}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./createLucideIcon-jKXsEGte.js";import"./Modal-Cq3DqFWU.js";const W={class:"bg-white dark:bg-gray-900 sm:border-b border-gray-200 dark:border-gray-700"},X={class:"max-w-8xl mx-auto hidden px-4 py-2 sm:px-6 md:block"},Z={class:"flex items-baseline justify-between space-x-6"},I={class:"text-sm"},T={class:"me-2 inline text-gray-600 dark:text-gray-400"},ee={class:"me-2 inline"},te={class:"me-2 inline"},le={class:"inline"},ae={class:"relative sm:mt-20"},oe={class:"mx-auto max-w-3xl px-2 py-2 sm:px-6 sm:py-6 lg:px-8"},se={class:"mb-6 mt-8 items-center justify-between sm:mt-0 sm:flex"},re={class:"mb-4 sm:mb-0"},ne={class:"border-b border-gray-200 p-5 dark:border-gray-700"},ie={class:"flex justify-between p-5"},de={key:0,class:"mb-6 rounded-lg border border-gray-200 bg-white dark:border-gray-700 dark:bg-gray-900"},ue={key:0,class:"flex items-center justify-between px-5 py-2"},me={class:"text-base"},ce={key:0,class:"code ms-3 text-xs"},pe={class:"text-sm"},be=["onClick"],ve=["onClick"],fe=["onSubmit"],ye={class:"border-b border-gray-200 p-5 dark:border-gray-700"},he={class:"flex justify-between p-5"},ge={key:1,class:"mb-6 rounded-lg border border-gray-200 bg-white dark:border-gray-700 dark:bg-gray-900"},ke={class:"p-5 text-center"},xe={__name:"Index",props:{layoutData:Object,data:Object},setup(g){const V=g,u=x(""),m=x(!1),f=x(0),p=x(V.data.contact_information_types),b=x(null),q=L(()=>Y.filter(V.data.contact_information_groups,(t,e)=>e!=="email"&&e!=="phone")),a=G({name:"",protocol:"",type:"",errors:[]}),F=()=>{a.name="",a.protocol="",a.type="",m.value=!0,f.value=0},K=t=>{a.name=t.name,a.protocol=t.protocol,a.type=t.type,f.value=t.id,m.value=!1},U=()=>{u.value="loading",axios.post(V.data.url.contact_information_type_store,a).then(t=>{p.value.unshift(t.data.data),u.value=null,m.value=!1,E(j("The contact information type has been created"),"success")}).catch(t=>{u.value=null,a.errors=t.response.data})},z=t=>{u.value="loading",axios.put(t.url.update,a).then(e=>{let o=p.value[t.type].findIndex(k=>k.id===t.id);p.value[t.type][o]=e.data.data,u.value=null,f.value=0,E(j("The contact information type has been updated"),"success")}).catch(e=>{u.value=null,a.errors=e.response.data})},O=()=>{axios.delete(b.value.url.destroy).then(()=>{let t=p.value.findIndex(e=>e.id===b.value.id);p.value.splice(t,1),b.value=null,E(j("The contact information type has been deleted"),"success")}).catch(t=>{u.value=null,a.errors=t.response.data,b.value=null})};return(t,e)=>(r(),S(H,{"layout-data":g.layoutData},{default:y(()=>[l("nav",W,[l("div",X,[l("div",Z,[l("ul",I,[l("li",T,n(t.$t("You are here:")),1),l("li",ee,[s(A(B),{href:g.data.url.settings,class:"text-blue-500 hover:underline"},{default:y(()=>[w(n(t.$t("Settings")),1)]),_:1},8,["href"])]),e[15]||(e[15]=l("li",{class:"relative me-2 inline"},[l("svg",{xmlns:"http://www.w3.org/2000/svg",class:"icon-breadcrumb relative inline h-3 w-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[l("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"})])],-1)),l("li",te,[s(A(B),{href:g.data.url.personalize,class:"text-blue-500 hover:underline"},{default:y(()=>[w(n(t.$t("Personalize your account")),1)]),_:1},8,["href"])]),e[16]||(e[16]=l("li",{class:"relative me-2 inline"},[l("svg",{xmlns:"http://www.w3.org/2000/svg",class:"icon-breadcrumb relative inline h-3 w-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[l("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"})])],-1)),l("li",le,n(t.$t("Contact information types")),1)])])])]),l("main",ae,[l("div",oe,[l("div",se,[l("h3",re,[e[17]||(e[17]=l("span",{class:"me-1"}," ☎️ ",-1)),w(" "+n(t.$t("All the contact information types")),1)]),m.value?v("",!0):(r(),S(C,{key:0,text:t.$t("Add a type"),icon:"plus",onClick:F},null,8,["text"]))]),m.value?(r(),d("form",{key:0,class:"mb-6 rounded-lg border border-gray-200 bg-white dark:border-gray-700 dark:bg-gray-900",onSubmit:e[7]||(e[7]=$(o=>U(),["prevent"]))},[l("div",ne,[s(N,{errors:a.errors},null,8,["errors"]),s(Q,{modelValue:a.type,"onUpdate:modelValue":e[0]||(e[0]=o=>a.type=o),"dropdown-class":"mb-2",label:t.$t("Type"),required:!0,data:q.value,onEscKeyPressed:e[1]||(e[1]=o=>m.value=!1)},null,8,["modelValue","label","data"]),s(_,{ref:"newContactInformationType",modelValue:a.name,"onUpdate:modelValue":e[2]||(e[2]=o=>a.name=o),label:t.$t("Name"),type:"text",autofocus:!0,"input-class":"block w-full mb-3",required:!0,autocomplete:!1,maxlength:255,onEscKeyPressed:e[3]||(e[3]=o=>m.value=!1)},null,8,["modelValue","label"]),s(_,{modelValue:a.protocol,"onUpdate:modelValue":e[4]||(e[4]=o=>a.protocol=o),label:t.$t("Protocol"),type:"text","input-class":"block w-full",required:!1,autocomplete:!1,maxlength:255,help:t.$t("A contact information can be clickable. For instance, a phone number can be clickable and launch the default application in your computer. If you do not know the protocol for the type you are adding, you can simply omit this field."),onEscKeyPressed:e[5]||(e[5]=o=>m.value=!1)},null,8,["modelValue","label","help"])]),l("div",ie,[s(D,{text:t.$t("Cancel"),class:h("me-3"),onClick:e[6]||(e[6]=o=>m.value=!1)},null,8,["text"]),s(C,{text:t.$t("Add"),state:u.value,icon:"plus",class:h("save")},null,8,["text","state"])])],32)):v("",!0),(r(!0),d(P,null,M(g.data.contact_information_groups,(o,k)=>(r(),d(P,{key:k},[l("span",null,n(o),1),p.value[k].length>0?(r(),d("ul",de,[(r(!0),d(P,null,M(p.value[k],i=>(r(),d("li",{key:i.id,class:"item-list border-b border-gray-200 hover:bg-slate-50 dark:border-gray-700 dark:bg-slate-900 dark:hover:bg-slate-800"},[f.value!==i.id?(r(),d("div",ue,[l("div",null,[l("span",me,n(i.name),1),i.protocol?(r(),d("code",ce,"["+n(t.$t("Protocol: :name",{name:i.protocol}))+"]",1)):v("",!0)]),l("ul",pe,[l("li",{class:"inline cursor-pointer text-blue-500 hover:underline",onClick:c=>K(i)},n(t.$t("Edit")),9,be),i.can_be_deleted?(r(),d("li",{key:0,class:"ms-4 inline cursor-pointer text-red-500 hover:text-red-900",onClick:c=>b.value=i},n(t.$t("Delete")),9,ve)):v("",!0)])])):v("",!0),f.value===i.id?(r(),d("form",{key:1,class:"item-list border-b border-gray-200 hover:bg-slate-50 dark:border-gray-700 dark:bg-slate-900 dark:hover:bg-slate-800",onSubmit:$(c=>z(i),["prevent"])},[l("div",ye,[s(N,{errors:a.errors},null,8,["errors"]),s(_,{ref_for:!0,ref:"rename",modelValue:a.name,"onUpdate:modelValue":e[8]||(e[8]=c=>a.name=c),label:t.$t("Name"),type:"text",autofocus:!0,"input-class":"block w-full mb-3",required:!0,autocomplete:!1,maxlength:255,onEscKeyPressed:e[9]||(e[9]=c=>f.value=0)},null,8,["modelValue","label"]),s(_,{modelValue:a.protocol,"onUpdate:modelValue":e[10]||(e[10]=c=>a.protocol=c),label:t.$t("Protocol"),type:"text","input-class":"block w-full",required:!1,autocomplete:!1,maxlength:255,disabled:i.can_be_deleted===!1,help:t.$t("A contact information can be clickable. For instance, a phone number can be clickable and launch the default application in your computer. If you do not know the protocol for the type you are adding, you can simply omit this field."),onEscKeyPressed:e[11]||(e[11]=c=>m.value=!1)},null,8,["modelValue","label","disabled","help"])]),l("div",he,[s(D,{text:t.$t("Cancel"),class:h("me-3"),onClick:e[12]||(e[12]=$(c=>f.value=0,["prevent"]))},null,8,["text"]),s(C,{text:t.$t("Save"),state:u.value,icon:"check",class:h("save")},null,8,["text","state"])])],40,fe)):v("",!0)]))),128))])):v("",!0)],64))),128)),s(J,{show:b.value!==null,onClose:e[14]||(e[14]=o=>b.value=null)},{title:y(()=>[w(n(t.$t("Delete a contact information type")),1)]),content:y(()=>[w(n(t.$t("Are you sure? This will remove the contact information type from all contacts, but won’t delete the contacts themselves.")),1)]),footer:y(()=>[s(D,{text:t.$t("Cancel"),class:h("me-3"),onClick:e[13]||(e[13]=$(o=>b.value=null,["prevent"]))},null,8,["text"]),s(C,{text:t.$t("Delete"),state:u.value,icon:"trash",class:h("save"),onClick:O},null,8,["text","state"])]),_:1},8,["show"]),p.value.length===0?(r(),d("div",ge,[l("p",ke,n(t.$t("There are no contact information types yet.")),1)])):v("",!0)])])]),_:1},8,["layout-data"]))}},Be=R(xe,[["__scopeId","data-v-1abb362d"]]);export{Be as default};
