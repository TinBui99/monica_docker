import{l as E,L as h,h as o,i as d,o as t,b as i,a,n as w,w as T,d as C,t as r,u as $,F as O,j as z,c as p,e as re,r as V,B as K,f as de,v as X,k as se,x as G,V as le,aD as ie,I as ce,ay as Z,D as q,O as ue,p as J}from"./app-CapNgXf-.js";import{L as I}from"./Loading-8Lv-NX8l.js";import{_ as B}from"./Avatar-BYmVGbiJ.js";import{_ as L}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{a as _e,_ as be}from"./ContactCard-DDKCeyoU.js";import{C as ve}from"./calendar-days-CHV_SxXd.js";import{_ as me,P as ee}from"./PrettyButton-C7IwNjfl.js";import{H as Q}from"./HoverMenu-5Cb05m1q.js";import{D as ye}from"./style-CRI3Zb-U.js";import{P as ge}from"./PrettySpan-CCXc1kgI.js";import{C as he}from"./ContactSelector-C0khNdCH.js";import{T as W}from"./TextInput-C8RADZPb.js";import{T as fe}from"./TextArea-Bj3iknHw.js";import{a as Y}from"./Layout-BAHf2dOa.js";import{c as ke}from"./createLucideIcon-jKXsEGte.js";/**
 * @license lucide-vue-next v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pe=ke("flame",[["path",{d:"M8.5 14.5A2.5 2.5 0 0 0 11 12c0-1.38-.5-2-1-3-1.072-2.143-.224-4.054 2-6 .5 2.5 2 4.9 4 6.5 2 1.6 3 3.5 3 5.5a7 7 0 1 1-14 0c0-1.153.433-2.294 1-3a2.5 2.5 0 0 0 2.5 2.5z",key:"96xj49"}]]),xe={components:{InertiaLink:E,Avatar:B},props:{data:{type:Object,default:null},contactViewMode:{type:Boolean,default:!0}}},we={key:0,class:"flex items-center rounded-lg border border-gray-300 px-3 py-2 dark:border-gray-700"},$e={class:"flex flex-col"},je={key:0,class:"text-gray-500"},Me={key:1,class:"text-xs text-gray-500"};function Ce(s,k,e,M,l,y){const g=h("avatar"),m=h("InertiaLink");return e.contactViewMode?d("",!0):(t(),o("div",we,[i(g,{data:e.data.avatar,class:w("relative me-2 h-8 w-8 rounded-full border border-gray-200 dark:border-gray-800")},null,8,["data"]),a("div",$e,[i(m,{href:e.data.url,class:"text-gray-800 hover:underline dark:text-gray-200"},{default:T(()=>[C(r(e.data.name),1)]),_:1},8,["href"]),e.data.age||e.data.age===0?(t(),o("span",je,r(e.data.age),1)):(t(),o("span",Me,r(s.$t("Unknown age")),1))])]))}const Ve=L(xe,[["render",Ce]]),Le={components:{InertiaLink:E,Avatar:B},props:{data:{type:Object,default:null},contactViewMode:{type:Boolean,default:!0}}},De={class:"rounded-lg border border-gray-300 dark:border-gray-700"},Te={key:0,class:"flex items-center border-b border-gray-300 px-3 py-2 text-sm dark:border-gray-700"},Ae={class:"flex flex-col"},Fe={class:"px-3 pb-0 pt-2"},Be={key:1,class:"mb-2 me-2 inline-block rounded-xs bg-neutral-200 px-2 py-1 text-xs font-semibold text-neutral-800 last:me-0"};function Se(s,k,e,M,l,y){const g=h("avatar"),m=h("InertiaLink");return t(),o("div",De,[e.contactViewMode?d("",!0):(t(),o("div",Te,[i(g,{data:e.data.contact.avatar,class:w("relative me-2 h-5 w-5 rounded-full border border-gray-200 dark:border-gray-800")},null,8,["data"]),a("div",Ae,[i(m,{href:e.data.contact.url,class:"text-gray-800 hover:underline dark:text-gray-200"},{default:T(()=>[C(r(e.data.contact.name),1)]),_:1},8,["href"])])])),a("div",Fe,[e.data.label.object?(t(),o("span",{key:0,class:w(["mb-2 me-2 inline-block rounded-xs px-2 py-1 text-xs font-semibold last:me-0",e.data.label.object.bg_color+" "+e.data.label.object.text_color])},[i(m,{href:e.data.label.object.url},{default:T(()=>[C(r(e.data.label.object.name),1)]),_:1},8,["href"])],2)):(t(),o("span",Be,[a("span",null,r(e.data.label.description),1)]))])])}const Ee=L(Le,[["render",Se]]),Pe={components:{InertiaLink:E,Avatar:B},props:{data:{type:Object,default:null},contactViewMode:{type:Boolean,default:!0}}},Oe={class:"rounded-lg border border-gray-300 dark:border-gray-700"},Ue={key:0,class:"flex items-center border-b border-gray-300 px-3 py-2 text-sm dark:border-gray-700"},Ne={class:"flex flex-col"},ze={key:1,class:"flex justify-between px-3 py-3"},qe={key:0,class:"mb-2 text-sm font-semibold"},Ye={key:0},He={key:1},Ke={key:2},Ge={key:3},Re={key:0},Ze=["href"],Je=["src","alt"],Qe={key:2,class:"flex justify-between px-3 py-3"};function We(s,k,e,M,l,y){const g=h("avatar"),m=h("InertiaLink");return t(),o("div",Oe,[e.contactViewMode?d("",!0):(t(),o("div",Ue,[i(g,{data:e.data.contact.avatar,class:w("relative me-2 h-5 w-5 rounded-full border border-gray-200 dark:border-gray-800")},null,8,["data"]),a("div",Ne,[i(m,{href:e.data.contact.url,class:"text-gray-800 hover:underline dark:text-gray-200"},{default:T(()=>[C(r(e.data.contact.name),1)]),_:1},8,["href"])])])),e.data.address.object?(t(),o("div",ze,[a("div",null,[e.data.address.object.type?(t(),o("p",qe,r(e.data.address.object.type.name),1)):d("",!0),a("div",null,[e.data.address.object.line_1?(t(),o("p",Ye,r(e.data.address.object.line_1),1)):d("",!0),e.data.address.object.line_2?(t(),o("p",He,r(e.data.address.object.line_2),1)):d("",!0),e.data.address.object.postal_code||e.data.address.object.city?(t(),o("p",Ke,r(e.data.address.object.postal_code)+" "+r(e.data.address.object.city),1)):d("",!0),e.data.address.object.country?(t(),o("p",Ge,r(e.data.address.object.country),1)):d("",!0)])]),e.data.address.object.image?(t(),o("div",Re,[a("a",{href:e.data.address.object.url.show,target:"_blank"},[a("img",{src:e.data.address.object.image,class:"rounded-xs",alt:e.data.address.object.description},null,8,Je)],8,Ze)])):d("",!0)])):(t(),o("div",Qe,[a("p",null,r(e.data.address.description),1)]))])}const Xe=L(Pe,[["render",We]]),Ie={components:{InertiaLink:E,Avatar:B},props:{data:{type:Object,default:null},contactViewMode:{type:Boolean,default:!0}}},et={class:"rounded-lg border border-gray-300 dark:border-gray-700"},tt={key:0,class:"flex items-center border-b border-gray-300 px-3 py-2 text-sm dark:border-gray-700"},at={class:"flex flex-col"},ot={class:"px-3 py-2"},nt={key:0},rt=["href"],dt={key:1};function st(s,k,e,M,l,y){const g=h("avatar"),m=h("InertiaLink");return t(),o("div",et,[e.contactViewMode?d("",!0):(t(),o("div",tt,[i(g,{data:e.data.contact.avatar,class:w("relative me-2 h-5 w-5 rounded-full border border-gray-200 dark:border-gray-800")},null,8,["data"]),a("div",at,[i(m,{href:e.data.contact.url,class:"text-gray-800 hover:underline dark:text-gray-200"},{default:T(()=>[C(r(e.data.contact.name),1)]),_:1},8,["href"])])])),a("div",ot,[e.data.information.object?(t(),o("span",nt,[a("a",{href:e.data.information.object.data,class:"text-blue-500 hover:underline"},r(e.data.information.object.label),9,rt)])):(t(),o("span",dt,r(e.data.information.description),1))])])}const lt=L(Ie,[["render",st]]),it={components:{InertiaLink:E,Avatar:B},props:{data:{type:Object,default:null},contactViewMode:{type:Boolean,default:!0}}},ct={class:"rounded-lg border border-gray-300 dark:border-gray-700"},ut={key:0,class:"flex items-center border-b border-gray-300 px-3 py-2 text-sm dark:border-gray-700"},_t={class:"flex flex-col"},bt={class:"px-3 py-2"},vt={key:0,class:"flex items-center"},mt={class:"me-2 text-sm text-gray-500"},yt={class:"me-2"},gt={key:1,class:"mb-2 me-2"};function ht(s,k,e,M,l,y){const g=h("avatar"),m=h("InertiaLink");return t(),o("div",ct,[e.contactViewMode?d("",!0):(t(),o("div",ut,[i(g,{data:e.data.contact.avatar,class:w("relative me-2 h-5 w-5 rounded-full border border-gray-200 dark:border-gray-800")},null,8,["data"]),a("div",_t,[i(m,{href:e.data.contact.url,class:"text-gray-800 hover:underline dark:text-gray-200"},{default:T(()=>[C(r(e.data.contact.name),1)]),_:1},8,["href"])])])),a("div",bt,[e.data.pet.object?(t(),o("div",vt,[a("span",mt,r(e.data.pet.object.pet_category.name),1),a("span",yt,r(e.data.pet.object.name),1)])):(t(),o("span",gt,[a("span",null,r(e.data.pet.description),1)]))])])}const ft=L(it,[["render",ht]]),kt={components:{InertiaLink:E,Avatar:B},props:{data:{type:Object,default:null},contactViewMode:{type:Boolean,default:!0}}},pt={class:"rounded-lg border border-gray-300 dark:border-gray-700"},xt={key:0,class:"flex items-center border-b border-gray-300 px-3 py-2 text-sm dark:border-gray-700"},wt={class:"flex flex-col"},$t={class:"px-3 py-2"},jt={key:0,class:"flex items-center"},Mt={class:"me-2"},Ct={key:1,class:"mb-2 me-2"};function Vt(s,k,e,M,l,y){const g=h("avatar"),m=h("InertiaLink");return t(),o("div",pt,[e.contactViewMode?d("",!0):(t(),o("div",xt,[i(g,{data:e.data.contact.avatar,class:w("relative me-2 h-5 w-5 rounded-full border border-gray-200 dark:border-gray-800")},null,8,["data"]),a("div",wt,[i(m,{href:e.data.contact.url,class:"text-gray-800 hover:underline dark:text-gray-200"},{default:T(()=>[C(r(e.data.contact.name),1)]),_:1},8,["href"])])])),a("div",$t,[e.data.goal.object?(t(),o("div",jt,[a("span",Mt,r(e.data.goal.object.name),1)])):(t(),o("span",Ct,[a("span",null,r(e.data.goal.description),1)]))])])}const Lt=L(kt,[["render",Vt]]),Dt={},Tt={xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"me-1 h-4 w-4 text-gray-400"};function At(s,k){return t(),o("svg",Tt,k[0]||(k[0]=[a("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M21.752 15.002A9.718 9.718 0 0118 15.75c-5.385 0-9.75-4.365-9.75-9.75 0-1.33.266-2.597.748-3.752A9.753 9.753 0 003 11.25C3 16.635 7.365 21 12.75 21a9.753 9.753 0 009.002-5.998z"},null,-1)]))}const Ft=L(Dt,[["render",At]]),Bt={components:{InertiaLink:E,Avatar:B,MoonIcon:Ft,CalendarIcon:_e},props:{data:{type:Object,default:null},contactViewMode:{type:Boolean,default:!0}}},St={class:"rounded-lg border border-gray-300 dark:border-gray-700"},Et={key:0,class:"flex items-center border-b border-gray-300 px-3 py-2 text-sm dark:border-gray-700"},Pt={class:"flex flex-col"},Ot={class:"px-3 py-2"},Ut={key:0},Nt={class:"mb-2 flex"},zt={class:"me-2"},qt={key:0,class:"flex items-center"},Yt={class:"flex items-center"},Ht={key:1,class:"mb-2 me-2"};function Kt(s,k,e,M,l,y){const g=h("avatar"),m=h("InertiaLink"),S=h("MoonIcon"),j=h("CalendarIcon");return t(),o("div",St,[e.contactViewMode?d("",!0):(t(),o("div",Et,[i(g,{data:e.data.contact.avatar,class:w("relative me-2 h-5 w-5 rounded-full border border-gray-200 dark:border-gray-800")},null,8,["data"]),a("div",Pt,[i(m,{href:e.data.contact.url,class:"text-gray-800 hover:underline dark:text-gray-200"},{default:T(()=>[C(r(e.data.contact.name),1)]),_:1},8,["href"])])])),a("div",Ot,[e.data.mood_tracking_event.object?(t(),o("div",Ut,[a("div",Nt,[a("div",zt,r(e.data.mood_tracking_event.description),1),e.data.mood_tracking_event.object.number_of_hours_slept?(t(),o("div",qt,[i(S),a("span",null,r(s.$tChoice("Slept :count hour|Slept :count hours",e.data.mood_tracking_event.object.number_of_hours_slept,{count:e.data.mood_tracking_event.object.number_of_hours_slept})),1)])):d("",!0)]),a("div",Yt,[i(j),C(" "+r(e.data.mood_tracking_event.object.rated_at),1)])])):(t(),o("span",Ht,[a("span",null,r(e.data.mood_tracking_event.description),1)]))])])}const Gt=L(Bt,[["render",Kt]]),Rt={class:"rounded-lg border border-gray-300 dark:border-gray-700"},Zt={key:0,class:"flex items-center border-b border-gray-300 px-3 py-2 text-sm dark:border-gray-700"},Jt={class:"flex flex-col"},Qt={class:"px-3 pb-2 pt-2"},Wt={key:0},Xt={key:0,class:"mb-2 block"},It={key:1,class:"mb-2 me-2 inline-block rounded-xs bg-neutral-200 px-2 py-1 text-xs font-semibold text-neutral-800 last:me-0"},ea={__name:"Note",props:{data:Object,contactViewMode:Boolean},setup(s){return(k,e)=>(t(),o("div",Rt,[s.contactViewMode?d("",!0):(t(),o("div",Zt,[i(B,{data:s.data.contact.avatar,class:w("relative me-2 h-5 w-5 rounded-full border border-gray-200 dark:border-gray-800")},null,8,["data"]),a("div",Jt,[i($(E),{href:s.data.contact.url,class:"text-gray-800 hover:underline dark:text-gray-200"},{default:T(()=>[C(r(s.data.contact.name),1)]),_:1},8,["href"])])])),a("div",Qt,[s.data.note.object?(t(),o("div",Wt,[s.data.note.object.title?(t(),o("div",Xt,r(s.data.note.object.title),1)):d("",!0),a("div",null,r(s.data.note.object.body),1)])):(t(),o("span",It,[a("span",null,r(s.data.note.description),1)]))])]))}},ta={components:{InertiaLink:E,Loading:I,Avatar:B,GenericAction:Ve,LabelAssigned:Ee,Addresses:Xe,ContactInformation:lt,Pet:ft,Goal:Lt,MoodTrackingEvent:Gt,Note:ea,CalendarDays:ve},props:{contactViewMode:{type:Boolean,default:!0},url:{type:String,default:""}},data(){return{feed:[],loading:!1,paginator:[]}},mounted(){this.initialLoad()},methods:{initialLoad(){this.loading=!0,axios.get(this.url).then(s=>{this.loading=!1,s.data.data.items.forEach(k=>{this.feed.push(k)}),this.paginator=s.data.paginator}).catch(()=>{})},load(){axios.get(this.paginator.nextPageUrl).then(s=>{s.data.data.items.forEach(k=>{this.feed.push(k)}),this.paginator=s.data.paginator}).catch(()=>{})}}},aa={class:"mb-4"},oa={class:"ms-4 border-s border-gray-200 dark:border-gray-700"},na={class:"mb-2 flex"},ra={class:"relative -start-[11px] top-[3px] w-6"},da={class:"flex flex-col md:flex-row w-full md:items-center justify-between"},sa={class:"me-2 text-gray-400"},la={key:1,class:"font-medium text-gray-800 dark:text-gray-200"},ia={class:"ms-2"},ca={class:"mb-1 md:mb-0 flex items-center gap-1 text-sm text-gray-400"},ua={key:0,class:"ms-6"},_a={key:1,class:"ms-6"},ba={class:"rounded-lg border border-gray-300 px-3 py-2"},va={class:"text-sm"},ma={key:0},ya={class:"p-5 text-center"},ga=["alt"],ha={key:1,class:"mb-5 rounded-lg border border-gray-200 p-20 text-center"},fa={key:2,class:"text-center"};function ka(s,k,e,M,l,y){const g=h("avatar"),m=h("InertiaLink"),S=h("CalendarDays"),j=h("generic-action"),D=h("label-assigned"),A=h("addresses"),F=h("contact-information"),U=h("pet"),N=h("goal"),P=h("mood-tracking-event"),c=h("note"),f=h("loading");return t(),o("div",aa,[a("div",oa,[(t(!0),o(O,null,z(l.feed,n=>(t(),o("div",{key:n.id,class:"mb-8"},[a("div",na,[a("div",ra,[i(g,{data:n.author.avatar,class:w("relative h-5 w-5 rounded-full border border-gray-200 dark:border-gray-800")},null,8,["data"])]),a("div",da,[a("p",sa,[n.author.url?(t(),p(m,{key:0,href:n.author.url,class:"font-medium text-gray-800 hover:underline dark:text-gray-200"},{default:T(()=>[C(r(n.author.name),1)]),_:2},1032,["href"])):(t(),o("span",la,r(n.author.name),1)),a("span",ia,r(n.sentence),1)]),a("p",ca,[a("span",null,r(n.created_at),1),i(S,{class:"h-3 w-3"})])])]),n.data?(t(),o("div",ua,[n.action==="contact_created"?(t(),p(j,{key:0,data:n.data,"contact-view-mode":e.contactViewMode},null,8,["data","contact-view-mode"])):d("",!0),n.action==="information_updated"?(t(),p(j,{key:1,data:n.data,"contact-view-mode":e.contactViewMode},null,8,["data","contact-view-mode"])):d("",!0),n.action==="job_information_updated"?(t(),p(j,{key:2,data:n.data,"contact-view-mode":e.contactViewMode},null,8,["data","contact-view-mode"])):d("",!0),n.action==="archived"?(t(),p(j,{key:3,data:n.data,"contact-view-mode":e.contactViewMode},null,8,["data","contact-view-mode"])):d("",!0),n.action==="unarchived"?(t(),p(j,{key:4,data:n.data,"contact-view-mode":e.contactViewMode},null,8,["data","contact-view-mode"])):d("",!0),n.action==="changed_avatar"?(t(),p(j,{key:5,data:n.data,"contact-view-mode":e.contactViewMode},null,8,["data","contact-view-mode"])):d("",!0),n.action==="favorited"?(t(),p(j,{key:6,data:n.data,"contact-view-mode":e.contactViewMode},null,8,["data","contact-view-mode"])):d("",!0),n.action==="religion_updated"?(t(),p(j,{key:7,data:n.data,"contact-view-mode":e.contactViewMode},null,8,["data","contact-view-mode"])):d("",!0),n.action==="label_assigned"?(t(),p(D,{key:8,data:n.data,"contact-view-mode":e.contactViewMode},null,8,["data","contact-view-mode"])):d("",!0),n.action==="label_removed"?(t(),p(D,{key:9,data:n.data,"contact-view-mode":e.contactViewMode},null,8,["data","contact-view-mode"])):d("",!0),n.action==="address_created"||n.action==="address_updated"||n.action==="address_destroyed"?(t(),p(A,{key:10,data:n.data,"contact-view-mode":e.contactViewMode},null,8,["data","contact-view-mode"])):d("",!0),n.action==="contact_information_created"||n.action==="contact_information_updated"||n.action==="contact_information_destroyed"?(t(),p(F,{key:11,data:n.data,"contact-view-mode":e.contactViewMode},null,8,["data","contact-view-mode"])):d("",!0),n.action==="pet_created"||n.action==="pet_updated"||n.action==="pet_destroyed"?(t(),p(U,{key:12,data:n.data,"contact-view-mode":e.contactViewMode},null,8,["data","contact-view-mode"])):d("",!0),n.action==="goal_created"||n.action==="goal_updated"||n.action==="goal_destroyed"?(t(),p(N,{key:13,data:n.data,"contact-view-mode":e.contactViewMode},null,8,["data","contact-view-mode"])):d("",!0),n.action==="mood_tracking_event_added"||n.action==="mood_tracking_event_updated"||n.action==="mood_tracking_event_deleted"?(t(),p(P,{key:14,data:n.data,"contact-view-mode":e.contactViewMode},null,8,["data","contact-view-mode"])):d("",!0),n.action==="note_created"||n.action==="note_updated"||n.action==="note_deleted"?(t(),p(c,{key:15,data:n.data,"contact-view-mode":e.contactViewMode},null,8,["data","contact-view-mode"])):d("",!0)])):d("",!0),n.description?(t(),o("div",_a,[a("div",ba,[a("span",va,r(n.description),1)])])):d("",!0)]))),128))]),l.feed.length===0&&!l.loading?(t(),o("div",ma,[a("p",ya,r(s.$t("There is no activity yet.")),1),a("img",{src:"/img/dashboard_blank_activity_feed.svg",alt:s.$t("Activity feed"),class:"mx-auto h-96 w-96"},null,8,ga)])):d("",!0),l.loading?(t(),o("div",ha,[i(f)])):d("",!0),l.paginator.hasMorePages?(t(),o("div",fa,[a("span",{onClick:k[0]||(k[0]=n=>y.load()),class:"cursor-pointer rounded-xs border border-gray-200 px-3 py-1 text-sm text-blue-500 hover:border-gray-500 dark:border-gray-700"},r(s.$t("Load previous entries")),1)])):d("",!0)])}const an=L(ta,[["render",ka]]),pa={key:0,xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"me-2 h-4 w-4 text-gray-500"},xa={key:1,xmlns:"http://www.w3.org/2000/svg",class:"icon-note relative inline h-3 w-3 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},wa={__name:"ClockIcon",props:{time:{type:String,default:"three"}},setup(s){return(k,e)=>(t(),o(O,null,[s.time=="three"?(t(),o("svg",pa,e[0]||(e[0]=[a("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 6v6h4.5m4.5 0a9 9 0 11-18 0 9 9 0 0118 0z"},null,-1)]))):d("",!0),s.time=="four"?(t(),o("svg",xa,e[1]||(e[1]=[a("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"},null,-1)]))):d("",!0)],64))}},$a={key:0,class:"border-b border-gray-200 dark:border-gray-700"},ja={class:"grid-skeleton grid grid-cols-2 justify-center gap-2 p-3"},Ma={class:"mb-1 text-xs font-semibold"},Ca={class:"rounded-lg border border-gray-200 bg-white dark:border-gray-700 dark:bg-gray-900"},Va=["onClick"],La={key:0},Da={class:"mb-1 text-xs font-semibold"},Ta={class:"rounded-lg border border-gray-200 bg-white dark:border-gray-700 dark:bg-gray-900"},Aa=["onClick"],Fa={class:"text-sm text-blue-500 hover:underline"},Ba={key:1,class:"flex items-center justify-between border-b border-gray-200 p-3 dark:border-gray-700"},Sa={class:"text-sm"},Ea={class:"rounded-xs border bg-white px-2 py-1 font-mono text-sm dark:bg-gray-800"},Pa={class:"rounded-xs border bg-white px-2 py-1 font-mono text-sm dark:bg-gray-800"},Oa={key:2,class:"border-b border-gray-200 p-3 dark:border-gray-700"},Ua={key:0,class:"flex items-center justify-between"},Na={class:"text-sm"},za={key:1},qa={class:"mb-2 block text-sm dark:text-gray-100"},Ya=["value"],Ha={key:3,class:"border-b border-gray-200 p-3 dark:border-gray-700"},Ka={class:"mb-2 block text-sm dark:text-gray-100"},Ga={class:"mb-4 flex items-center"},Ra={key:4,class:"border-b border-gray-200 p-3 dark:border-gray-700"},Za={class:"border-b border-gray-200 p-3 dark:border-gray-700"},Ja={key:5,class:"flex items-center border-b border-gray-200 pb-1 pe-3 ps-3 pt-3 dark:border-gray-700"},Qa={class:"me-5 inline-block"},Wa={class:"flex items-center"},Xa={for:"km",class:"ms-1 block cursor-pointer text-sm font-medium text-gray-700 dark:text-gray-300"},Ia={class:"inline-block"},eo={class:"flex items-center"},to={for:"miles",class:"ms-1 block cursor-pointer text-sm font-medium text-gray-700 dark:text-gray-300"},ao={key:6,class:"flex flex-wrap border-b border-gray-200 p-3 dark:border-gray-700"},oo={key:0},no={key:1},ro={key:2},so={class:"flex justify-between p-5"},lo={__name:"CreateLifeEvent",props:{layoutData:Object,data:Object,openModal:Boolean,createTimelineEvent:Boolean,timelineEvent:Object,lifeEvent:Object},emits:["closeModal","timelineEventCreated","lifeEventCreated"],setup(s,{emit:k}){const e=s,M=k,l=re({lifeEventTypeId:0,label:null,started_at:null,participants:[],summary:null,description:null,distance:0,distance_unit:"km"}),y=V(!1),g=V([]),m=V(null),S=V(!1),j=V(!1),D=V(!1),A=V(!1),F=V(!1),U=K("summaryField"),N=K("descriptionField"),P=K("distanceField"),c=V({modelValue:"YYYY-MM-DD"});de(()=>e.openModal,_=>{j.value=_}),X(()=>{f(),e.lifeEvent&&(l.label=e.lifeEvent.label,l.started_at=e.lifeEvent.started_at,l.lifeEventTypeId=e.lifeEvent.life_event_type.id,g.value=e.lifeEvent.life_event_type.category,m.value=e.lifeEvent.life_event_type,e.lifeEvent.summary&&(l.summary=e.lifeEvent.summary,D.value=!0),e.lifeEvent.description&&(l.description=e.lifeEvent.description,A.value=!0),e.lifeEvent.distance&&(l.distance=e.lifeEvent.distance,l.distance_unit=e.lifeEvent.distance_unit,F.value=!0),l.participants=e.lifeEvent.participants,m.value=e.lifeEvent.life_event_type)});const f=()=>{j.value=e.openModal,g.value=e.data.life_event_categories[0],l.started_at=e.data.current_date,l.summary=null,l.description=null,l.distance=0,D.value=!1,A.value=!1,F.value=!1},n=_=>{var b=e.data.life_event_categories.findIndex(v=>v.id===_.id);g.value=e.data.life_event_categories[b]},u=_=>{m.value=_,l.lifeEventTypeId=_.id},x=()=>{g.value=e.data.life_event_categories[0],m.value=null},te=()=>{l.summary=null,D.value=!0,q().then(()=>U.value.focus())},ae=()=>{l.description=null,A.value=!0,q().then(()=>N.value.focus())},oe=()=>{l.distance=null,F.value=!0,q().then(()=>P.value.focus())},ne=()=>{y.value="loading";let _={method:"post",data:l};e.lifeEvent?(_.url=e.lifeEvent.url.edit,_.method="put"):_.url=e.createTimelineEvent?e.data.url.store:e.timelineEvent.url.store,axios.request(_).then(b=>{y.value="",q().then(()=>M("closeModal")),e.createTimelineEvent?M("timelineEventCreated",b.data.data):M("lifeEventCreated",b.data.data),m.value=null,f()}).catch(()=>{y.value=""})};return(_,b)=>(t(),o("div",null,[j.value?(t(),o("form",{key:0,class:"mb-6 rounded-lg border border-gray-200 bg-gray-50 dark:border-gray-700 dark:bg-gray-900",onSubmit:b[13]||(b[13]=se(v=>ne(),["prevent"]))},[m.value?(t(),o("div",Ba,[a("div",null,[a("span",Sa,r(_.$t("Chosen type:")),1),a("span",Ea,r(g.value.label),1),b[14]||(b[14]=C(" > ",-1)),a("span",Pa,r(m.value.label),1)]),a("p",{onClick:b[0]||(b[0]=v=>x()),class:"cursor-pointer text-sm text-blue-500 hover:underline"},r(_.$t("Change")),1)])):(t(),o("div",$a,[a("div",ja,[a("div",null,[a("p",Ma,r(_.$t("Categories")),1),a("ul",Ca,[(t(!0),o(O,null,z(s.data.life_event_categories,v=>(t(),o("li",{onClick:H=>n(v),key:v.id,class:"item-list flex cursor-pointer border-b border-gray-200 px-3 py-1 hover:bg-slate-50 dark:border-gray-700 dark:bg-slate-900 dark:hover:bg-slate-800"},[a("div",{class:w(["flex w-full justify-between",v.id===g.value.id?"font-bold":""])},[a("div",null,r(v.label),1),v.id===g.value.id?(t(),o("span",La,[i(me)])):d("",!0)],2)],8,Va))),128))])]),a("div",null,[a("p",Da,r(_.$t("Types")),1),a("ul",Ta,[(t(!0),o(O,null,z(g.value.life_event_types,v=>(t(),o("li",{key:v.id,onClick:H=>u(v),class:"item-list flex cursor-pointer justify-between border-b border-gray-200 px-3 py-1 hover:bg-slate-50 dark:border-gray-700 dark:bg-slate-900 dark:hover:bg-slate-800"},[a("span",null,r(v.label),1),a("span",Fa,r(_.$t("Choose")),1)],8,Aa))),128))])])])])),m.value?(t(),o("div",Oa,[S.value?d("",!0):(t(),o("div",Ua,[a("div",null,[a("span",Na,r(_.$t("Date of the event:")),1),C(" "+r(s.lifeEvent?s.lifeEvent.happened_at:s.data.current_date_human_format),1)]),a("p",{onClick:b[1]||(b[1]=v=>S.value=!0),class:"cursor-pointer text-sm text-blue-500 hover:underline"},r(_.$t("Change")),1)])),S.value?(t(),o("div",za,[a("p",qa,r(_.$t("Date of the event")),1),i($(ye),{modelValue:$(l).started_at,"onUpdate:modelValue":b[2]||(b[2]=v=>$(l).started_at=v),modelModifiers:{string:!0},timezone:"UTC",class:"inline-block h-full",masks:c.value,locale:_.$page.props.auth.user?.locale_ietf,"is-dark":_.isDark()},{default:T(({inputValue:v,inputEvents:H})=>[a("input",le({class:"rounded-xs border bg-white px-2 py-1 dark:bg-gray-900",value:v},ie(H,!0)),null,16,Ya)]),_:1},8,["modelValue","masks","locale","is-dark"])])):d("",!0)])):d("",!0),m.value?(t(),o("div",Ha,[a("p",Ka,r(_.$t("Participants")),1),a("div",Ga,[i(B,{data:s.data.contact.avatar,class:w("me-2 h-5 w-5")},null,8,["data"]),a("span",null,r(s.data.contact.name),1)]),i(he,{modelValue:$(l).participants,"onUpdate:modelValue":b[3]||(b[3]=v=>$(l).participants=v),"search-url":s.layoutData.vault.url.search_contacts_only,"most-consulted-contacts-url":s.layoutData.vault.url.get_most_consulted_contacts,"display-most-consulted-contacts":!0,"add-multiple-contacts":!0,required:!0,class:w("flex-1 border-gray-200 dark:border-gray-700")},null,8,["modelValue","search-url","most-consulted-contacts-url"])])):d("",!0),m.value&&D.value?(t(),o("div",Ra,[i(W,{ref_key:"summaryField",ref:U,modelValue:$(l).summary,"onUpdate:modelValue":b[4]||(b[4]=v=>$(l).summary=v),label:_.$t("Summary"),type:"text",autofocus:!0,"input-class":"block w-full",required:!1,autocomplete:!1,maxlength:255,onEscKeyPressed:b[5]||(b[5]=v=>D.value=!1)},null,8,["modelValue","label"])])):d("",!0),G(a("div",Za,[i(fe,{ref_key:"descriptionField",ref:N,modelValue:$(l).description,"onUpdate:modelValue":b[6]||(b[6]=v=>$(l).description=v),label:_.$t("Description"),onEscKeyPressed:b[7]||(b[7]=v=>A.value=!1),maxlength:65535,"textarea-class":"block w-full"},null,8,["modelValue","label"])],512),[[ce,m.value&&A.value]]),m.value&&F.value?(t(),o("div",Ja,[i(W,{ref_key:"distanceField",ref:P,modelValue:$(l).distance,"onUpdate:modelValue":b[8]||(b[8]=v=>$(l).distance=v),label:_.$t("Distance"),type:"number",autofocus:!0,"input-class":"me-2",required:!1,autocomplete:!1,help:_.$t("Enter a number from 0 to 100000. No decimals."),min:0,max:1e5,onEscKeyPressed:b[9]||(b[9]=v=>F.value=!1)},null,8,["modelValue","label","help"]),a("ul",null,[a("li",Qa,[a("div",Wa,[G(a("input",{id:"km","onUpdate:modelValue":b[10]||(b[10]=v=>$(l).distance_unit=v),value:"km",name:"distance_unit",type:"radio",class:"h-4 w-4 border-gray-300 text-sky-500 dark:border-gray-700"},null,512),[[Z,$(l).distance_unit]]),a("label",Xa,r(_.$t("km")),1)])]),a("li",Ia,[a("div",eo,[G(a("input",{id:"miles","onUpdate:modelValue":b[11]||(b[11]=v=>$(l).distance_unit=v),value:"miles",name:"distance_unit",type:"radio",class:"h-4 w-4 border-gray-300 text-sky-500 dark:border-gray-700"},null,512),[[Z,$(l).distance_unit]]),a("label",to,r(_.$t("miles")),1)])])])])):d("",!0),m.value?(t(),o("div",ao,[D.value?d("",!0):(t(),o("div",oo,[a("span",{class:"mb-2 me-2 cursor-pointer rounded-lg border bg-slate-200 px-1 py-1 text-sm hover:bg-slate-300 dark:border-gray-500 dark:bg-slate-800 dark:text-gray-50 dark:hover:bg-slate-700",onClick:te},r(_.$t("+ add summary")),1)])),A.value?d("",!0):(t(),o("div",no,[a("span",{class:"mb-2 me-2 cursor-pointer rounded-lg border bg-slate-200 px-1 py-1 text-sm hover:bg-slate-300 dark:border-gray-500 dark:bg-slate-800 dark:text-gray-50 dark:hover:bg-slate-700",onClick:ae},r(_.$t("+ add description")),1)])),F.value?d("",!0):(t(),o("div",ro,[a("span",{class:"mb-2 me-2 cursor-pointer rounded-lg border bg-slate-200 px-1 py-1 text-sm hover:bg-slate-300 dark:border-gray-500 dark:bg-slate-800 dark:text-gray-50 dark:hover:bg-slate-700",onClick:oe},r(_.$t("+ add distance")),1)]))])):d("",!0),a("div",so,[i(ge,{text:_.$t("Cancel"),class:w("me-3"),onClick:b[12]||(b[12]=v=>_.$emit("closeModal"))},null,8,["text"]),m.value?(t(),p(ee,{key:0,text:_.$t("Save"),state:y.value,icon:"plus",class:w("save")},null,8,["text","state"])):d("",!0)])],32)):d("",!0)]))}},R=L(lo,[["__scopeId","data-v-9bbcb592"]]),io={},co={class:"me-2 h-6 w-6 text-gray-500",viewBox:"0 0 64 64",xmlns:"http://www.w3.org/2000/svg","stroke-width":"3",stroke:"#000000",fill:"none"};function uo(s,k){return t(),o("svg",co,k[0]||(k[0]=[ue('<path d="M17.94,54.81a.1.1,0,0,1-.14,0c-1-1.11-11.69-13.23-11.69-21.26,0-9.94,6.5-12.24,11.76-12.24,4.84,0,11.06,2.6,11.06,12.24C28.93,41.84,18.87,53.72,17.94,54.81Z"></path><circle cx="17.52" cy="31.38" r="4.75"></circle><path d="M49.58,34.77a.11.11,0,0,1-.15,0c-.87-1-9.19-10.45-9.19-16.74,0-7.84,5.12-9.65,9.27-9.65,3.81,0,8.71,2,8.71,9.65C58.22,24.52,50.4,33.81,49.58,34.77Z"></path><circle cx="49.23" cy="17.32" r="3.75"></circle><path d="M17.87,54.89a28.73,28.73,0,0,0,3.9.89"></path><path d="M24.68,56.07c2.79.12,5.85-.28,7.9-2.08,5.8-5.09,2.89-11.25,6.75-14.71a16.72,16.72,0,0,1,4.93-3" stroke-dasharray="7.8 2.92"></path><path d="M45.63,35.8a23,23,0,0,1,3.88-.95"></path>',7)]))}const _o=L(io,[["render",uo]]),bo={class:"mb-10"},vo={class:"mb-3 items-center justify-between border-b border-gray-200 pb-2 dark:border-gray-700 sm:flex"},mo={class:"mb-2 sm:mb-0 flex items-center gap-2"},yo={class:"font-semibold"},go={key:0},ho=["onClick"],fo={class:"me-2 text-gray-500"},ko={class:"ms-3 whitespace-nowrap rounded-lg bg-slate-100 px-2 py-0.5 text-sm text-slate-400 dark:bg-slate-900"},po={class:"flex"},xo={key:0},wo=["onClick"],$o={key:0,class:"me-4 text-sm font-bold"},jo={class:"rounded-xs border bg-white px-2 py-1 font-mono text-sm dark:border-gray-700 dark:bg-gray-800"},Mo={class:"rounded-xs border bg-white px-2 py-1 font-mono text-sm dark:border-gray-700 dark:bg-gray-800"},Co={class:"flex"},Vo={key:0,class:"flex items-center border-b border-gray-200 px-3 py-2 dark:border-gray-700"},Lo={key:1,class:"flex items-center border-b border-gray-200 px-3 py-2 text-sm dark:border-gray-700"},Do={class:"me-4 flex items-center"},To={key:0,class:"flex items-center"},Ao={key:2,class:"flex flex-wrap p-3 pb-1"},Fo={class:"mb-2 ms-6"},Bo=["onClick"],So={key:0,class:"text-center"},Eo={key:1,class:"mb-5 rounded-lg border border-gray-200 p-20 text-center dark:border-gray-700"},Po={key:2,class:"mb-6 rounded-lg border border-gray-200 bg-white dark:border-gray-700 dark:bg-gray-900"},Oo=["alt"],Uo={class:"px-5 pb-5 pt-2 text-center"},No={__name:"LifeEvent",props:{layoutData:Object,data:Object},setup(s){const k=s,e=V(!1),M=V(!0),l=V([]),y=V([]),g=V(0);X(()=>{axios.get(k.data.url.load).then(c=>{M.value=!1,c.data.data.timeline_events.forEach(f=>{y.value.push(f)}),l.value=c.data.paginator}).catch(()=>{})});const m=()=>{axios.get(l.value.nextPageUrl).then(c=>{M.value=!1,c.data.data.timeline_events.forEach(f=>{y.value.push(f)}),l.value=c.data.paginator}).catch(()=>{})},S=c=>{confirm(J("Are you sure? This action cannot be undone."))&&axios.delete(c.url.destroy).then(()=>{var f=y.value.findIndex(n=>n.id===c.id);y.value.splice(f,1)}).catch(()=>{})},j=(c,f)=>{confirm(J("Are you sure? This action cannot be undone."))&&axios.delete(f.url.destroy).then(()=>{var n=y.value.findIndex(x=>x.id===c.id),u=y.value[n].life_events.findIndex(x=>x.id===f.id);y.value[n].life_events.splice(u,1)}).catch(()=>{})},D=(c,f)=>{let n=y.value.findIndex(x=>x.id===c.id),u=y.value[n].life_events.findIndex(x=>x.id===f.id);y.value[n].life_events[u]=f},A=c=>{y.value.unshift(c)},F=c=>{var f=y.value.findIndex(n=>n.id===c.timeline_event.id);y.value[f].life_events.unshift(c)},U=()=>{e.value=!0},N=c=>{c.collapsed=!c.collapsed,axios.post(c.url.toggle)},P=c=>{c.collapsed=!c.collapsed,axios.post(c.url.toggle)};return(c,f)=>(t(),o("div",bo,[a("div",vo,[a("div",mo,[i($(pe),{class:"h-4 w-4"}),a("span",yo,r(c.$t("Life events")),1)]),i(ee,{text:c.$t("Add a life event"),icon:"plus",class:w("w-full sm:w-fit"),onClick:U},null,8,["text"])]),a("div",null,[i(R,{data:s.data,"layout-data":s.layoutData,"open-modal":e.value,"create-timeline-event":!0,onCloseModal:f[0]||(f[0]=n=>e.value=!1),onTimelineEventCreated:A},null,8,["data","layout-data","open-modal"]),y.value?(t(),o("div",go,[(t(!0),o(O,null,z(y.value,n=>(t(),o("div",{key:n.id,class:"mb-4"},[a("div",{class:"mb-2 flex cursor-pointer items-center justify-between rounded-lg border border-gray-200 px-3 py-2 hover:bg-slate-50 dark:border-gray-700 dark:bg-gray-900 dark:hover:bg-slate-900",onClick:u=>N(n)},[a("div",null,[a("span",fo,r(n.happened_at),1),a("span",ko,r(n.life_events.length),1)]),a("div",po,[n.collapsed?(t(),p(Y,{key:0,type:"down"})):d("",!0),n.collapsed?d("",!0):(t(),p(Y,{key:1,type:"up"})),i(Q,{"show-edit":!1,"show-delete":!0,onDelete:u=>S(n)},null,8,["onDelete"])])],8,ho),n.collapsed?d("",!0):(t(),o("div",xo,[(t(!0),o(O,null,z(n.life_events,u=>(t(),o("div",{key:u.id,class:w([u.collapsed?"":"border","mb-2 ms-6 rounded-lg border-gray-200 dark:border-gray-700 dark:bg-gray-900"])},[u.edit?(t(),p(R,{key:0,data:s.data,"layout-data":s.layoutData,"open-modal":u.edit,"life-event":u,onCloseModal:x=>u.edit=!1,onLifeEventCreated:x=>D(n,x)},null,8,["data","layout-data","open-modal","life-event","onCloseModal","onLifeEventCreated"])):(t(),o(O,{key:1},[a("div",{class:w([u.collapsed?"rounded-lg border":"","flex cursor-pointer items-center justify-between rounded-t-lg border-b border-gray-200 px-3 py-2 hover:bg-slate-50 dark:border-gray-700 dark:hover:bg-slate-900"])},[a("div",{onClick:x=>P(u),class:"flex items-center"},[u.summary?(t(),o("p",$o,r(u.summary),1)):d("",!0),a("div",null,[a("span",jo,r(u.life_event_type.category.label),1),f[3]||(f[3]=C(" > ",-1)),a("span",Mo,r(u.life_event_type.label),1)])],8,wo),a("div",Co,[n.collapsed?(t(),p(Y,{key:0,type:"down",onClick:x=>P(u)},null,8,["onClick"])):d("",!0),n.collapsed?d("",!0):(t(),p(Y,{key:1,type:"up",onClick:x=>P(u)},null,8,["onClick"])),i(Q,{"show-edit":!0,"show-delete":!0,onEdit:x=>u.edit=!0,onDelete:x=>j(n,u)},null,8,["onEdit","onDelete"])])],2),!u.collapsed&&u.description?(t(),o("div",Vo,r(u.description),1)):d("",!0),u.collapsed?d("",!0):(t(),o("div",Lo,[a("div",Do,[i(wa),C(" "+r(u.happened_at),1)]),u.distance?(t(),o("div",To,[i(_o),a("span",null,r(u.distance),1)])):d("",!0)])),u.collapsed?d("",!0):(t(),o("div",Ao,[(t(!0),o(O,null,z(u.participants,x=>(t(),o("div",{key:x.id,class:"me-4"},[i(be,{contact:x,"avatar-classes":"h-5 w-5 rounded-full me-2","display-name":!0},null,8,["contact"])]))),128))]))],64))],2))),128)),a("div",Fo,[g.value!==n.id?(t(),o("span",{key:0,onClick:u=>g.value=n.id,class:"cursor-pointer text-sm text-blue-500 hover:underline"},r(c.$t("Add another life event")),9,Bo)):d("",!0),i(R,{data:s.data,"layout-data":s.layoutData,"open-modal":g.value===n.id,"create-timeline-event":!1,"timeline-event":n,onCloseModal:f[1]||(f[1]=u=>g.value=0),onLifeEventCreated:F},null,8,["data","layout-data","open-modal","timeline-event"])])]))]))),128)),l.value.hasMorePages?(t(),o("div",So,[a("span",{onClick:f[2]||(f[2]=n=>m()),class:"cursor-pointer rounded-xs border border-gray-200 px-3 py-1 text-sm text-blue-500 hover:border-gray-500 dark:border-gray-700"},r(c.$t("Load previous entries")),1)])):d("",!0)])):d("",!0),M.value?(t(),o("div",Eo,[i(I)])):d("",!0),y.value.length===0?(t(),o("div",Po,[a("img",{src:"/img/contact_blank_life_event.svg",alt:c.$t("Life events"),class:"mx-auto mt-4 h-20 w-20"},null,8,Oo),a("p",Uo,r(c.$t("Life events let you document what happened in your life.")),1)])):d("",!0)])]))}},on=L(No,[["__scopeId","data-v-48f4dc04"]]);export{an as F,on as L,wa as _,pe as a};
