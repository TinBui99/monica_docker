import{e as H,r as y,B as K,h as d,o as r,a,i as b,c as L,b as n,u as c,t as m,n as h,k as C,F as S,j as T,d as E,w as _,J as U,D as J,m as w,p as f}from"./app-CapNgXf-.js";import{E as I}from"./Errors-ClHFmp7Z.js";import{P as g}from"./PrettyButton-C7IwNjfl.js";import{T as V}from"./TextInput-C8RADZPb.js";import{P as j}from"./PrettySpan-CCXc1kgI.js";import{H as R}from"./HoverMenu-5Cb05m1q.js";import{_ as W}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{c as Q}from"./createLucideIcon-jKXsEGte.js";import{A as x}from"./index-C2abvfVx.js";/**
 * @license lucide-vue-next v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X=Q("chart-spline",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M7 16c.5-2 1.5-7 4-7 2 0 2 3 4 3 2.5 0 4.5-5 5-7",key:"lw07rv"}]]),Y={class:"mb-10"},Z={class:"mb-3 items-center justify-between border-b border-gray-200 pb-2 dark:border-gray-700 sm:flex"},M={class:"mb-2 sm:mb-0 flex items-center gap-2"},ee={class:"font-semibold"},te={class:"border-b border-gray-200 p-5 dark:border-gray-700"},se={class:"flex justify-between p-5"},ae={key:0,class:"mb-6 rounded-lg border border-gray-200 bg-white dark:border-gray-700 dark:bg-gray-900"},le={key:0,class:"flex items-center justify-between p-3"},oe={class:"me-8 flex w-full items-center justify-between"},re={class:"mb-1 text-lg font-semibold"},ne=["onClick"],de=["onClick"],ie={class:"cursor-pointer whitespace-nowrap rounded-lg bg-slate-100 px-2 py-0.5 text-sm text-slate-400"},ue={class:"cursor-pointer whitespace-nowrap rounded-lg bg-yellow-100 px-2 py-0.5 text-sm text-slate-400"},ce={class:"cursor-pointer whitespace-nowrap rounded-lg bg-green-100 px-2 py-0.5 text-sm text-slate-400"},me={key:1,class:"w-full px-3 py-4 text-xl sm:w-fit"},pe={key:1,class:"m-3 mb-2 rounded-lg border border-gray-200"},be={class:"charts-css column show-labels show-primary-axis h-72"},ve={class:"tooltip"},he=["onSubmit"],ye={class:"border-b border-gray-200 p-5 dark:border-gray-700"},fe={class:"flex justify-between p-5"},ge={key:1,class:"mb-6 rounded-lg border border-gray-200 bg-white dark:border-gray-700 dark:bg-gray-900"},ke=["alt"],_e={class:"px-5 pb-5 pt-2 text-center"},we={__name:"LifeMetrics",props:{data:Object},setup(F){const $=F,i=H({label:""}),v=y(!1),k=K("labelField"),u=y(""),l=y($.data.data),p=y(0),N=y(0),P=()=>{v.value=!0,i.label="",J().then(()=>k.value.focus())},B=e=>{p.value=e.id,i.label=e.label},z=e=>{N.value=e.id},D=e=>{let s=l.value.findIndex(t=>t.id===e.id);l.value[s].show_graph=!l.value[s].show_graph},A=()=>{u.value="loading",axios.post($.data.url.store,i).then(e=>{w(f("The life metric has been created"),"success"),u.value="",v.value=!1,l.value.push(e.data.data)}).catch(()=>{u.value=""})},O=e=>{u.value="loading",axios.post(e.url.store,i).then(s=>{u.value="",l.value[l.value.findIndex(t=>t.id===e.id)]=s.data.data,l.value[l.value.findIndex(t=>t.id===e.id)].incremented=!0}).catch(()=>{u.value=""})},q=e=>{u.value="loading",axios.put(e.url.update,i).then(s=>{w(f("The life metric has been updated"),"success"),u.value="",p.value=0,l.value[l.value.findIndex(t=>t.id===e.id)]=s.data.data}).catch(()=>{u.value=""})},G=e=>{confirm(f("Are you sure? This action cannot be undone."))&&axios.delete(e.url.destroy).then(()=>{w(f("The life metric has been deleted"),"success");let s=l.value.findIndex(t=>t.id===e.id);l.value.splice(s,1)}).catch(()=>{})};return(e,s)=>(r(),d("div",Y,[a("div",Z,[a("div",M,[n(c(X),{class:"h-4 w-4"}),a("span",ee,m(e.$t("Life metrics")),1)]),v.value?b("",!0):(r(),L(g,{key:0,text:e.$t("Track a new metric"),icon:"plus",class:h("w-full sm:w-fit"),onClick:P},null,8,["text"]))]),v.value?(r(),d("form",{key:0,class:"mb-2 mt-2 rounded-lg border border-gray-200 bg-white dark:border-gray-700 dark:bg-gray-900",onSubmit:s[3]||(s[3]=C(t=>A(),["prevent"]))},[a("div",te,[n(I,{errors:c(i).errors},null,8,["errors"]),n(V,{ref_key:"labelField",ref:k,modelValue:c(i).label,"onUpdate:modelValue":s[0]||(s[0]=t=>c(i).label=t),label:e.$t("Name"),type:"text",autofocus:!0,"input-class":"block w-full",required:!0,autocomplete:!1,placeholder:e.$t("Watch Netflix every day"),maxlength:255,onEscKeyPressed:s[1]||(s[1]=t=>v.value=!1)},null,8,["modelValue","label","placeholder"])]),a("div",se,[n(j,{text:e.$t("Cancel"),class:h("me-3"),onClick:s[2]||(s[2]=t=>v.value=!1)},null,8,["text"]),n(g,{text:e.$t("Save"),state:u.value,icon:"plus",class:h("save")},null,8,["text","state"])])],32)):b("",!0),a("div",null,[l.value.length>0?(r(),d("ul",ae,[(r(!0),d(S,null,T(l.value,t=>(r(),d("li",{key:t.id,class:"item-list border-b border-gray-200 hover:bg-slate-50 dark:border-gray-700 dark:bg-slate-900 dark:hover:bg-slate-800"},[p.value!==t.id?(r(),d("div",le,[a("div",oe,[a("div",null,[a("p",re,m(t.label),1),a("ul",{onClick:o=>D(t)},[a("li",{onClick:o=>z(t),class:"text-sm text-gray-600"},[E(m(e.$t("Total:"))+" ",1),n(c(x),{placement:"bottomLeft",title:e.$t("Events this week"),"arrow-point-at-center":""},{default:_(()=>[a("span",ie,m(t.stats.weekly_events),1)]),_:2},1032,["title"]),s[7]||(s[7]=a("span",{class:"mx-1 text-gray-400"},"/",-1)),n(c(x),{placement:"bottomLeft",title:e.$t("Events this month"),"arrow-point-at-center":""},{default:_(()=>[a("span",ue,m(t.stats.monthly_events),1)]),_:2},1032,["title"]),s[8]||(s[8]=a("span",{class:"mx-1 text-gray-400"},"/",-1)),n(c(x),{placement:"bottomLeft",title:e.$t("Events this year"),"arrow-point-at-center":""},{default:_(()=>[a("span",ce,m(t.stats.yearly_events),1)]),_:2},1032,["title"])],8,de)],8,ne)]),t.incremented?(r(),d("span",me,"ðŸ¤­")):(r(),L(g,{key:0,text:"+ 1",class:h("w-full px-8 py-4 sm:w-fit"),onClick:o=>O(t)},null,8,["onClick"]))]),n(R,{"show-edit":!0,"show-delete":!0,onEdit:o=>B(t),onDelete:o=>G(t)},null,8,["onEdit","onDelete"])])):b("",!0),p.value!==t.id&&t.show_graph?(r(),d("div",pe,[a("table",be,[a("tbody",null,[(r(!0),d(S,null,T(t.months,o=>(r(),d("tr",{key:o.id},[a("td",{style:U("--size: calc("+o.events+"/"+t.max_number_of_events)},[E(m(o.friendly_name)+" ",1),a("span",ve,m(o.events)+" events ",1)],4)]))),128))])])])):b("",!0),p.value===t.id?(r(),d("form",{key:2,class:"bg-white dark:border-gray-700 dark:bg-gray-900",onSubmit:C(o=>q(t),["prevent"])},[a("div",ye,[n(I,{errors:c(i).errors},null,8,["errors"]),n(V,{ref_for:!0,ref_key:"labelField",ref:k,modelValue:c(i).label,"onUpdate:modelValue":s[4]||(s[4]=o=>c(i).label=o),label:e.$t("Name"),type:"text",autofocus:!0,"input-class":"block w-full",required:!0,autocomplete:!1,maxlength:255,onEscKeyPressed:s[5]||(s[5]=o=>p.value=0)},null,8,["modelValue","label"])]),a("div",fe,[n(j,{text:e.$t("Cancel"),class:h("me-3"),onClick:s[6]||(s[6]=o=>p.value=0)},null,8,["text"]),n(g,{text:e.$t("Save"),state:u.value,icon:"check",class:h("save")},null,8,["text","state"])])],40,he)):b("",!0)]))),128))])):b("",!0),l.value.length===0?(r(),d("div",ge,[a("img",{src:"/img/vault_life_metrics_blank.svg",alt:e.$t("Life events"),class:"mx-auto mt-4 h-20 w-20"},null,8,ke),a("p",_e,m(e.$t("Life metrics let you track metrics that are important to you.")),1)])):b("",!0)])]))}},xe=W(we,[["__scopeId","data-v-f99935c1"]]),Fe=Object.freeze(Object.defineProperty({__proto__:null,default:xe},Symbol.toStringTag,{value:"Module"}));export{X as C,xe as L,Fe as a};
