import{l as L,L as u,c as h,o as n,w as y,a as t,t as r,b as p,d as x,k as D,h as m,i,n as c,x as b,ay as g,y as U}from"./app-CapNgXf-.js";import{_ as P}from"./Layout-BAHf2dOa.js";import{P as S}from"./PrettyLink-C13tRubX.js";import{P as I}from"./PrettyButton-C7IwNjfl.js";import{T as O}from"./TextInput-C8RADZPb.js";import{D as q}from"./Dropdown-C6O7kLlt.js";import{E as B}from"./Errors-ClHFmp7Z.js";import{C as G}from"./ContactSelector-C0khNdCH.js";import{_ as T}from"./Avatar-BYmVGbiJ.js";import{_ as j}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./createLucideIcon-jKXsEGte.js";const A={components:{InertiaLink:L,Layout:P,PrettyLink:S,PrettyButton:I,TextInput:O,Dropdown:q,Errors:B,ContactSelector:G,Avatar:T},props:{layoutData:{type:Object,default:null},data:{type:Object,default:null}},data(){return{loadingState:"",showRelationshipTypeDetails:!1,showMoreContactOptions:!1,showContactName:!1,showLastNameField:!1,showMiddleNameField:!1,showNicknameField:!1,showMaidenNameField:!1,showGenderField:!1,showPronounField:!1,fromRelationship:"",toRelationship:"",form:{choice:"unknown",create_contact_entry:!1,relationship_type_id:0,base_contact_id:0,other_contact_id:[],last_name:"",middle_name:"",nickname:"",maiden_name:"",gender_id:"",pronoun_id:"",errors:[]}}},computed:{fromRelationshipOptions(){return _.map(this.data.relationship_group_types,s=>({id:s.id,optgroup:s.name,options:_.map(s.types,e=>({id:e.id,name:e.name}))}))}},created(){this.form.base_contact_id=this.data.contact.id,this.fromRelationship="Father",this.toRelationship="Child"},methods:{displayContactNameField(){this.form.choice="name",this.showContactName=!0,this.showMoreContactOptions=!0,this.$nextTick().then(()=>{this.$refs.contactName.focus()})},hideContactNameField(){this.form.choice="unknown",this.form.first_name="",this.form.last_name="",this.form.middle_name="",this.form.nickname="",this.form.maiden_name="",this.form.gender_id="",this.form.pronoun_id="",this.showContactName=!1,this.showMoreContactOptions=!1},displayContactSelector(){this.form.choice="choice",this.showContactName=!1,this.showMoreContactOptions=!1},displayLastNameField(){this.showLastNameField=!0},displayMiddleNameField(){this.showMiddleNameField=!0},displayNicknameField(){this.showNicknameField=!0},displayMaidenNameField(){this.showMaidenNameField=!0},displayGenderField(){this.showGenderField=!0},displayPronounField(){this.showPronounField=!0},toggle(){var s=this.fromRelationship;this.fromRelationship=this.toRelationship,this.toRelationship=s,this.form.base_contact_id===this.data.contact.id?this.form.base_contact_id=0:this.form.base_contact_id=this.data.contact.id},load(s){var e=this.data.relationship_types.findIndex(d=>d.id===parseInt(s));this.fromRelationship=this.data.relationship_types[e].name,this.toRelationship=this.data.relationship_types[e].name_reverse_relationship,this.showRelationshipTypeDetails=!0},submit(){this.loadingState="loading",axios.post(this.data.url.store,this.form).then(s=>{localStorage.success=this.$t("The relationship has been added"),this.$inertia.visit(s.data.data)}).catch(s=>{this.form.errors=s.response.data,this.loadingState=null})}}},E={class:"bg-white dark:bg-gray-900 sm:mt-20 sm:border-b"},z={class:"max-w-8xl mx-auto hidden px-4 py-2 sm:px-6 md:block"},Y={class:"flex items-baseline justify-between space-x-6"},H={class:"text-sm"},J={class:"me-2 inline text-gray-600 dark:text-gray-400"},K={class:"me-2 inline"},Q={class:"me-2 inline"},W={class:"inline"},X={class:"relative sm:mt-16"},Z={class:"mx-auto max-w-lg px-2 py-2 sm:px-6 sm:py-6 lg:px-8"},$={class:"section-head border-b border-gray-200 bg-blue-50 p-5 dark:border-gray-700 dark:bg-blue-900"},ee={class:"text-center text-2xl font-medium"},te={class:"border-b border-gray-200 p-5 dark:border-gray-700"},oe={for:"types",class:"mb-2 block text-sm"},ae={key:0},se={class:"border-b border-gray-200 p-5 dark:border-gray-700"},le={class:"mb-6"},re={class:"mb-2 inline-block flex-none rounded-md bg-gray-200 px-2 py-1 text-xs font-semibold uppercase tracking-wide text-gray-600 dark:text-gray-400"},ne={class:"flex items-center"},ie={class:"flex"},de={class:"text-xs"},me={class:"mb-2 inline-block flex-none rounded-md bg-gray-200 px-2 py-1 text-xs font-semibold uppercase tracking-wide text-gray-600 dark:text-gray-400"},ce={class:"mb-2 flex items-center"},ue={for:"unknown",class:"ms-3 block cursor-pointer text-sm font-medium text-gray-700 dark:text-gray-300"},pe={class:"mb-2 flex items-center"},he={for:"name",class:"ms-3 block cursor-pointer text-sm font-medium text-gray-700 dark:text-gray-300"},fe={key:0,class:"ps-6"},be={class:"mb-4 flex flex-wrap text-xs"},ye={class:"mb-2 flex items-center"},ge={for:"contact",class:"ms-3 block cursor-pointer text-sm font-medium text-gray-700 dark:text-gray-300"},ke={key:1,class:"ps-6"},we={key:0,class:"border-b border-gray-200 p-5 dark:border-gray-700"},_e={class:"flex flex-wrap text-xs"},xe={key:1,class:"border-b border-gray-200 p-5 dark:border-gray-700"},ve={class:"relative flex items-start"},Fe={for:"create-contact",class:"ms-2 block cursor-pointer text-sm text-gray-900 dark:text-white"},Ce={class:"flex justify-between p-5"};function Ne(s,e,d,Ve,o,l){const k=u("InertiaLink"),v=u("errors"),F=u("Dropdown"),C=u("avatar"),f=u("text-input"),N=u("contact-selector"),w=u("dropdown"),V=u("pretty-link"),M=u("pretty-button"),R=u("layout");return n(),h(R,{"layout-data":d.layoutData,"inside-vault":!0},{default:y(()=>[t("nav",E,[t("div",z,[t("div",Y,[t("ul",H,[t("li",J,r(s.$t("You are here:")),1),t("li",K,[p(k,{href:d.layoutData.vault.url.contacts,class:"text-blue-500 hover:underline"},{default:y(()=>[x(r(s.$t("Contacts")),1)]),_:1},8,["href"])]),e[24]||(e[24]=t("li",{class:"relative me-2 inline"},[t("svg",{xmlns:"http://www.w3.org/2000/svg",class:"icon-breadcrumb relative inline h-3 w-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"})])],-1)),t("li",Q,[p(k,{href:d.data.url.contact,class:"text-blue-500 hover:underline"},{default:y(()=>[x(r(s.$t("Profile of :name",{name:d.data.contact.name})),1)]),_:1},8,["href"])]),e[25]||(e[25]=t("li",{class:"relative me-2 inline"},[t("svg",{xmlns:"http://www.w3.org/2000/svg",class:"icon-breadcrumb relative inline h-3 w-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"})])],-1)),t("li",W,r(s.$t("Add a relationship")),1)])])])]),t("main",X,[t("div",Z,[t("form",{class:"mb-6 rounded-lg border border-gray-200 bg-white dark:border-gray-700 dark:bg-gray-900",onSubmit:e[23]||(e[23]=D(a=>l.submit(),["prevent"]))},[t("div",$,[t("h1",ee,r(s.$t("Add a relationship")),1)]),t("div",te,[p(v,{errors:o.form.errors},null,8,["errors"]),t("label",oe,r(s.$t("Select a relationship type")),1),p(F,{id:"types",modelValue:o.form.relationship_type_id,"onUpdate:modelValue":[e[0]||(e[0]=a=>o.form.relationship_type_id=a),l.load],name:"types",class:"w-full rounded-md border-gray-300 bg-white px-3 py-2 shadow-xs focus:border-indigo-300 focus:outline-hidden focus:ring-3 focus:ring-indigo-200/50 dark:bg-gray-900 sm:text-sm",data:l.fromRelationshipOptions},null,8,["modelValue","onUpdate:modelValue","data"])]),o.showRelationshipTypeDetails?(n(),m("div",ae,[t("div",se,[t("div",le,[t("p",re,r(o.fromRelationship),1),t("div",ne,[p(C,{data:d.data.contact.avatar,class:c("me-2 h-5 w-5")},null,8,["data"]),t("span",null,r(d.data.contact.name),1)])]),t("div",{class:"w-100 mb-4 block cursor-pointer text-center text-gray-400 hover:text-gray-900",onClick:e[1]||(e[1]=a=>l.toggle())},[t("div",ie,[e[26]||(e[26]=t("svg",{xmlns:"http://www.w3.org/2000/svg",class:"me-2 h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M7 16V4m0 0L3 8m4-4l4 4m6 0v12m0 0l4-4m-4 4l-4-4"})],-1)),t("span",de,r(s.$t("Switch role")),1)])]),t("div",null,[t("p",me,r(o.toRelationship),1),t("div",null,[t("div",ce,[b(t("input",{id:"unknown","onUpdate:modelValue":e[2]||(e[2]=a=>o.form.choice=a),value:"unknown",name:"name-order",type:"radio",class:"h-4 w-4 border-gray-300 text-sky-500 dark:border-gray-700",onClick:e[3]||(e[3]=(...a)=>l.hideContactNameField&&l.hideContactNameField(...a))},null,512),[[g,o.form.choice]]),t("label",ue,r(s.$t("I donâ€™t know the name")),1)]),t("div",pe,[b(t("input",{id:"name","onUpdate:modelValue":e[4]||(e[4]=a=>o.form.choice=a),value:"name",name:"name-order",type:"radio",class:"h-4 w-4 border-gray-300 text-sky-500 dark:border-gray-700",onClick:e[5]||(e[5]=(...a)=>l.displayContactNameField&&l.displayContactNameField(...a))},null,512),[[g,o.form.choice]]),t("label",he,r(s.$t("I know the name")),1)]),o.showContactName?(n(),m("div",fe,[p(f,{ref:"contactName",modelValue:o.form.first_name,"onUpdate:modelValue":e[6]||(e[6]=a=>o.form.first_name=a),autofocus:!0,class:c("mb-5"),"input-class":"block w-full",required:!0,maxlength:255},null,8,["modelValue"]),o.showLastNameField?(n(),h(f,{key:0,id:"last_name",modelValue:o.form.last_name,"onUpdate:modelValue":e[7]||(e[7]=a=>o.form.last_name=a),class:c("mb-5"),"input-class":"block w-full",required:!1,maxlength:255,label:s.$t("Last name")},null,8,["modelValue","label"])):i("",!0),t("div",be,[o.showLastNameField?i("",!0):(n(),m("span",{key:0,class:"mb-2 me-2 flex cursor-pointer flex-wrap rounded-lg border bg-slate-200 px-1 py-1 hover:bg-slate-300 dark:bg-slate-500 dark:text-gray-900",onClick:e[8]||(e[8]=(...a)=>l.displayLastNameField&&l.displayLastNameField(...a))},r(s.$t("+ last name")),1)),o.showMiddleNameField?i("",!0):(n(),m("span",{key:1,class:"mb-2 me-2 flex cursor-pointer flex-wrap rounded-lg border bg-slate-200 px-1 py-1 hover:bg-slate-300 dark:bg-slate-500 dark:text-gray-900",onClick:e[9]||(e[9]=(...a)=>l.displayMiddleNameField&&l.displayMiddleNameField(...a))},r(s.$t("+ middle name")),1)),o.showNicknameField?i("",!0):(n(),m("span",{key:2,class:"mb-2 me-2 flex cursor-pointer flex-wrap rounded-lg border bg-slate-200 px-1 py-1 hover:bg-slate-300 dark:bg-slate-500 dark:text-gray-900",onClick:e[10]||(e[10]=(...a)=>l.displayNicknameField&&l.displayNicknameField(...a))},r(s.$t("+ nickname")),1)),o.showMaidenNameField?i("",!0):(n(),m("span",{key:3,class:"mb-2 me-2 flex cursor-pointer flex-wrap rounded-lg border bg-slate-200 px-1 py-1 hover:bg-slate-300 dark:bg-slate-500 dark:text-gray-900",onClick:e[11]||(e[11]=(...a)=>l.displayMaidenNameField&&l.displayMaidenNameField(...a))},r(s.$t("+ maiden name")),1))])])):i("",!0),t("div",ye,[b(t("input",{id:"contact","onUpdate:modelValue":e[12]||(e[12]=a=>o.form.choice=a),value:"contact",name:"name-order",type:"radio",class:"h-4 w-4 border-gray-300 text-sky-500 dark:border-gray-700",onInput:e[13]||(e[13]=(...a)=>l.displayContactSelector&&l.displayContactSelector(...a))},null,544),[[g,o.form.choice]]),t("label",ge,r(s.$t("Choose an existing contact")),1)]),o.form.choice==="contact"?(n(),m("div",ke,[p(N,{modelValue:o.form.other_contact_id,"onUpdate:modelValue":e[14]||(e[14]=a=>o.form.other_contact_id=a),"search-url":d.layoutData.vault.url.search_contacts_only,"most-consulted-contacts-url":d.layoutData.vault.url.get_most_consulted_contacts,"display-most-consulted-contacts":!1,"add-multiple-contacts":!1,required:!0,class:c("flex-1 border-gray-200 dark:border-gray-700")},null,8,["modelValue","search-url","most-consulted-contacts-url"])])):i("",!0)])])]),o.showMoreContactOptions?(n(),m("div",we,[o.showMiddleNameField?(n(),h(f,{key:0,id:"middle_name",modelValue:o.form.middle_name,"onUpdate:modelValue":e[15]||(e[15]=a=>o.form.middle_name=a),class:c("mb-5"),"input-class":"block w-full",required:!1,maxlength:255,label:s.$t("Middle name")},null,8,["modelValue","label"])):i("",!0),o.showNicknameField?(n(),h(f,{key:1,id:"nickname",modelValue:o.form.nickname,"onUpdate:modelValue":e[16]||(e[16]=a=>o.form.nickname=a),class:c("mb-5"),"input-class":"block w-full",required:!1,maxlength:255,label:s.$t("Nickname")},null,8,["modelValue","label"])):i("",!0),o.showMaidenNameField?(n(),h(f,{key:2,id:"maiden_name",modelValue:o.form.maiden_name,"onUpdate:modelValue":e[17]||(e[17]=a=>o.form.maiden_name=a),class:c("mb-5"),"input-class":"block w-full",required:!1,maxlength:255,label:s.$t("Maiden name")},null,8,["modelValue","label"])):i("",!0),o.showGenderField?(n(),h(w,{key:3,modelValue:o.form.gender_id,"onUpdate:modelValue":e[18]||(e[18]=a=>o.form.gender_id=a),data:d.data.genders,required:!1,class:c("mb-5"),placeholder:s.$t("Choose a value"),"dropdown-class":"block w-full",label:s.$t("Gender")},null,8,["modelValue","data","placeholder","label"])):i("",!0),o.showPronounField?(n(),h(w,{key:4,modelValue:o.form.pronoun_id,"onUpdate:modelValue":e[19]||(e[19]=a=>o.form.pronoun_id=a),data:d.data.pronouns,required:!1,class:c("mb-5"),placeholder:s.$t("Choose a value"),"dropdown-class":"block w-full",label:s.$t("Pronoun")},null,8,["modelValue","data","placeholder","label"])):i("",!0),t("div",_e,[d.data.genders.length>0&&!o.showGenderField?(n(),m("span",{key:0,class:"mb-2 me-2 flex cursor-pointer flex-wrap rounded-lg border bg-slate-200 px-1 py-1 hover:bg-slate-300 dark:bg-slate-500 dark:text-gray-900",onClick:e[20]||(e[20]=(...a)=>l.displayGenderField&&l.displayGenderField(...a))},r(s.$t("+ gender")),1)):i("",!0),d.data.pronouns.length>0&&!o.showPronounField?(n(),m("span",{key:1,class:"mb-2 me-2 flex cursor-pointer flex-wrap rounded-lg border bg-slate-200 px-1 py-1 hover:bg-slate-300 dark:bg-slate-500 dark:text-gray-900",onClick:e[21]||(e[21]=(...a)=>l.displayPronounField&&l.displayPronounField(...a))},r(s.$t("+ pronoun")),1)):i("",!0)])])):i("",!0),o.form.choice!=="contact"?(n(),m("div",xe,[t("div",ve,[b(t("input",{id:"create-contact","onUpdate:modelValue":e[22]||(e[22]=a=>o.form.create_contact_entry=a),name:"create-contact",type:"checkbox",class:"focus:ring-3 relative h-4 w-4 rounded-xs border border-gray-300 bg-gray-50 focus:ring-blue-300 dark:border-gray-600 dark:bg-gray-700 dark:ring-offset-gray-800 dark:focus:ring-blue-600"},null,512),[[U,o.form.create_contact_entry]]),t("label",Fe,r(s.$t("Create a contact entry for this person")),1)])])):i("",!0)])):i("",!0),t("div",Ce,[p(V,{href:d.data.url.back,text:s.$t("Cancel"),class:c("me-3")},null,8,["href","text"]),p(M,{href:"data.url.vault.create",text:s.$t("Add"),state:o.loadingState,icon:"check",class:c("save")},null,8,["text","state"])])],32)])])]),_:1},8,["layout-data"])}const Ge=j(A,[["render",Ne],["__scopeId","data-v-80a64ff1"]]);export{Ge as default};
