import{P as I}from"./PrettySpan-CCXc1kgI.js";import{P as S}from"./PrettyButton-C7IwNjfl.js";import{E as V}from"./Errors-ClHFmp7Z.js";import{L as y,h as a,o as i,a as e,i as d,c as _,d as u,t as n,k as x,b as p,F as U,j as w,x as c,ay as h,n as C}from"./app-CapNgXf-.js";import{_ as M}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./createLucideIcon-jKXsEGte.js";const A={components:{PrettySpan:I,PrettyButton:S,Errors:V},props:{data:{type:Object,default:null},layoutData:{type:Object,default:null}},data(){return{localUsersInVault:[],localUsersInAccount:[],addUserModalShown:!1,loadingState:"",editedUser:[],form:{permission:null,user_id:0,errors:[]}}},mounted(){this.localUsersInVault=this.data.users_in_vault,this.localUsersInAccount=this.data.users_in_account},methods:{showAddUserModal(){this.form.errors=[],this.form.permission=null,this.form.user_id=0,this.addUserModalShown=!0},showChangePermissionModal(s){this.form.errors=[],this.form.permission=s.permission,this.editedUser=s},store(){this.loadingState="loading",axios.post(this.data.url.user_store,this.form).then(s=>{this.flash(this.$t("The user has been added"),"success"),this.loadingState="",this.localUsersInVault.unshift(s.data.data);var t=this.localUsersInAccount.findIndex(m=>m.id===this.form.user_id);this.localUsersInAccount.splice(t,1),this.addUserModalShown=!1}).catch(s=>{this.form.errors=s.response.data,this.loadingState=""})},update(s){this.loadingState="loading",axios.put(s.url.update,this.form).then(t=>{this.flash(this.$t("The user has been updated"),"success");var m=this.localUsersInVault.findIndex(f=>f.id===s.id);this.localUsersInVault[m]=t.data.data,this.loadingState="",this.editedUser=[]}).catch(t=>{this.form.errors=t.response.data,this.loadingState=""})},destroy(s){axios.delete(s.url.destroy).then(()=>{this.flash(this.$t("The user has been removed"),"success");var t=this.localUsersInVault.findIndex(m=>m.id===s.id);this.localUsersInVault.splice(t,1),this.localUsersInAccount.unshift(s)}).catch(t=>{this.form.errors=t.response.data})}}},j={class:"mb-12"},P={class:"mb-3 mt-8 items-center justify-between sm:mt-0 sm:flex"},T={class:"mb-4 sm:mb-0"},B={class:"border-b border-gray-200 p-5 dark:border-gray-700"},E={class:"mb-2"},D=["id","value"],N=["for"],F={class:"border-b border-gray-200 p-5 dark:border-gray-700"},L={class:"mb-2"},O={class:"mb-2 flex items-center"},R={for:"viewer",class:"ms-3 block cursor-pointer text-sm font-medium text-gray-700 dark:text-gray-300"},W={class:"ms-4 font-normal text-gray-500"},z={class:"mb-2 flex items-center"},q={for:"editor",class:"ms-3 block cursor-pointer text-sm font-medium text-gray-700 dark:text-gray-300"},G={class:"ms-4 font-normal text-gray-500"},H={class:"flex items-center"},J={for:"manager",class:"ms-3 block cursor-pointer text-sm font-medium text-gray-700 dark:text-gray-300"},K={class:"ms-4 font-normal text-gray-500"},Q={class:"flex justify-between p-5"},X={key:1,class:"mb-6 rounded-lg border border-gray-200 bg-white p-5 text-center dark:border-gray-700 dark:bg-gray-900"},Y={class:"mb-6 rounded-xs border border-gray-200 text-sm dark:border-gray-700"},Z={key:0,class:"rounded-b rounded-t bg-white dark:bg-gray-900"},$={key:0,class:"flex items-center justify-between px-5 py-2"},ee={key:0,class:"text-sm"},se=["onClick"],te={class:"text-blue-500 hover:underline"},re=["onClick"],oe=["onSubmit"],ne={class:"border-b border-gray-200 p-5 dark:border-gray-700"},ie={class:"mb-2"},ae={class:"mb-2 flex items-center"},le={class:"ms-4 font-normal text-gray-500"},de={class:"mb-2 flex items-center"},me={for:"editor",class:"ms-3 block cursor-pointer text-sm font-medium text-gray-700 dark:text-gray-300"},ue={class:"ms-4 font-normal text-gray-500"},ce={class:"flex items-center"},he={for:"manager",class:"ms-3 block cursor-pointer text-sm font-medium text-gray-700 dark:text-gray-300"},pe={class:"ms-4 font-normal text-gray-500"},ge={class:"flex justify-between p-5"},be={key:1},ye={class:"p-5 text-center"};function fe(s,t,m,f,r,g){const b=y("pretty-span"),v=y("errors"),k=y("pretty-button");return i(),a("div",j,[e("div",P,[e("h3",T,[t[11]||(t[11]=e("span",{class:"me-1"}," ðŸ± ",-1)),u(" "+n(s.$t("Users")),1)]),r.addUserModalShown?d("",!0):(i(),_(b,{key:0,text:s.$t("Add a user"),icon:"plus",onClick:g.showAddUserModal},null,8,["text","onClick"])),r.addUserModalShown&&r.localUsersInAccount.length===0?(i(),_(b,{key:1,text:s.$t("Cancel"),onClick:t[0]||(t[0]=o=>r.addUserModalShown=!1)},null,8,["text"])):d("",!0)]),r.addUserModalShown&&r.localUsersInAccount.length>0?(i(),a("form",{key:0,class:"mb-6 rounded-lg border border-gray-200 bg-white dark:border-gray-700 dark:bg-gray-900",onSubmit:t[6]||(t[6]=x(o=>g.store(),["prevent"]))},[e("div",B,[p(v,{errors:r.form.errors},null,8,["errors"]),e("p",E,n(s.$t("Who should we invite in this vault?")),1),(i(!0),a(U,null,w(r.localUsersInAccount,o=>(i(),a("div",{key:o.id,class:"dropdown-list mb-2 flex items-center"},[c(e("input",{id:"user"+o.id,"onUpdate:modelValue":t[1]||(t[1]=l=>r.form.user_id=l),value:o.id,name:"user",type:"radio",class:"h-4 w-4 border-gray-300 text-sky-500 dark:border-gray-700"},null,8,D),[[h,r.form.user_id]]),e("label",{for:"user"+o.id,class:"ms-3 block cursor-pointer text-sm font-medium text-gray-700 dark:text-gray-300"},n(o.name),9,N)]))),128))]),e("div",F,[e("div",null,[e("p",L,n(s.$t("What permission should the user have?")),1),e("div",O,[c(e("input",{id:"viewer","onUpdate:modelValue":t[2]||(t[2]=o=>r.form.permission=o),value:"300",name:"permission",type:"radio",class:"h-4 w-4 border-gray-300 text-sky-500 dark:border-gray-700"},null,512),[[h,r.form.permission]]),e("label",R,[u(n(s.$t("Viewer"))+" ",1),e("span",W,n(s.$t("Can view data, but canâ€™t edit it.")),1)])]),e("div",z,[c(e("input",{id:"editor","onUpdate:modelValue":t[3]||(t[3]=o=>r.form.permission=o),value:"200",name:"permission",type:"radio",class:"h-4 w-4 border-gray-300 text-sky-500 dark:border-gray-700"},null,512),[[h,r.form.permission]]),e("label",q,[u(n(s.$t("Editor"))+" ",1),e("span",G,n(s.$t("Can edit data, but canâ€™t manage the vault.")),1)])]),e("div",H,[c(e("input",{id:"manager","onUpdate:modelValue":t[4]||(t[4]=o=>r.form.permission=o),value:"100",name:"permission",type:"radio",class:"h-4 w-4 border-gray-300 text-sky-500 dark:border-gray-700"},null,512),[[h,r.form.permission]]),e("label",J,[u(n(s.$t("Manager"))+" ",1),e("span",K,n(s.$t("Can do everything, including adding or removing other users.")),1)])])])]),e("div",Q,[p(b,{text:s.$t("Cancel"),onClick:t[5]||(t[5]=o=>r.addUserModalShown=!1)},null,8,["text"]),p(k,{text:s.$t("Add"),state:r.loadingState,icon:"plus",class:C("save")},null,8,["text","state"])])],32)):d("",!0),r.addUserModalShown&&r.localUsersInAccount.length===0?(i(),a("div",X,[e("p",null,n(s.$t("There are no other users in this account.")),1)])):d("",!0),e("div",Y,[r.localUsersInVault.length>0?(i(),a("ul",Z,[(i(!0),a(U,null,w(r.localUsersInVault,o=>(i(),a("li",{key:o.id,class:"item-list border-b border-gray-200 hover:bg-slate-50 dark:border-gray-700 dark:bg-slate-900 dark:hover:bg-slate-800"},[r.editedUser.id!==o.id?(i(),a("div",$,[e("span",null,n(o.name),1),o.id!==m.layoutData.user.id?(i(),a("ul",ee,[e("li",{class:"me-4 inline cursor-pointer",onClick:l=>g.showChangePermissionModal(o)},[e("span",te,n(s.$t("Change permission")),1)],8,se),e("li",{class:"inline cursor-pointer text-red-500 hover:text-red-900",onClick:l=>g.destroy(o)},n(s.$t("Remove")),9,re)])):d("",!0)])):d("",!0),r.editedUser.id===o.id?(i(),a("form",{key:1,class:"bg-white dark:bg-gray-900",onSubmit:x(l=>g.update(o),["prevent"])},[e("div",ne,[p(v,{errors:r.form.errors},null,8,["errors"]),e("p",ie,n(s.$t("Permission for :name",{name:o.name})),1),e("div",ae,[c(e("input",{id:"viewer","onUpdate:modelValue":t[7]||(t[7]=l=>r.form.permission=l),value:"300",name:"permission",type:"radio",class:"h-4 w-4 border-gray-300 text-sky-500 dark:border-gray-700"},null,512),[[h,r.form.permission]]),u(" "+n(s.$t("Viewer"))+" ",1),e("span",le,n(s.$t("Can view data, but canâ€™t edit it.")),1)]),e("div",de,[c(e("input",{id:"editor","onUpdate:modelValue":t[8]||(t[8]=l=>r.form.permission=l),value:"200",name:"permission",type:"radio",class:"h-4 w-4 border-gray-300 text-sky-500 dark:border-gray-700"},null,512),[[h,r.form.permission]]),e("label",me,[u(n(s.$t("Editor"))+" ",1),e("span",ue,n(s.$t("Can edit data, but canâ€™t manage the vault.")),1)])]),e("div",ce,[c(e("input",{id:"manager","onUpdate:modelValue":t[9]||(t[9]=l=>r.form.permission=l),value:"100",name:"permission",type:"radio",class:"h-4 w-4 border-gray-300 text-sky-500 dark:border-gray-700"},null,512),[[h,r.form.permission]]),e("label",he,[u(n(s.$t("Manager"))+" ",1),e("span",pe,n(s.$t("Can do everything, including adding or removing other users.")),1)])])]),e("div",ge,[p(b,{text:s.$t("Cancel"),onClick:t[10]||(t[10]=l=>r.editedUser=[])},null,8,["text"]),p(k,{text:s.$t("Change permission"),state:r.loadingState,icon:"check",class:C("save")},null,8,["text","state"])])],40,oe)):d("",!0)]))),128))])):d("",!0),r.localUsersInVault.length===0?(i(),a("div",be,[e("p",ye,n(s.$t("There are no other users in this account.")),1)])):d("",!0)])])}const Ce=M(A,[["render",fe],["__scopeId","data-v-9192cd8c"]]);export{Ce as default};
