import{g as ye,e as Y,r as F,f as ve,h as x,o as P,b as _,i as M,w as v,u as S,d as T,t as g,n as q,a as $,F as X,j as G,k as W,m as ge,p as he}from"./app-CapNgXf-.js";import{_ as Z}from"./ActionMessage-DWfp09e1.js";import{_ as be}from"./ActionSection-Cf9mlxMW.js";import{_ as J}from"./Button-CeJKJvkU.js";import{_ as ke}from"./ConfirmationModal-C4kmuD-S.js";import{_ as _e}from"./DangerButton-C3VCCtYy.js";import{_ as ee}from"./DialogModal-DpvCIBlW.js";import{_ as Ce}from"./FormSection-BwO_IaZ9.js";import{_ as Te}from"./Input-DBW5TJZF.js";import{_ as te}from"./Checkbox-BoR3ajDr.js";import{_ as we}from"./InputError-BapgdLlk.js";import{_ as ne}from"./Label-WzmNYhjC.js";import{_ as K}from"./SecondaryButton-LDZ02WBB.js";import"./SectionTitle-yCtI3_Xi.js";import"./PrettyButton-C7IwNjfl.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./createLucideIcon-jKXsEGte.js";import"./Modal-Cq3DqFWU.js";var V={exports:{}};/*!
 * clipboard.js v2.0.11
 * https://clipboardjs.com/
 *
 * Licensed MIT © Zeno Rocha
 */var Ae=V.exports,oe;function Se(){return oe||(oe=1,function(L,U){(function(E,w){L.exports=w()})(Ae,function(){return function(){var C={686:function(u,r,e){e.d(r,{default:function(){return me}});var c=e(279),f=e.n(c),p=e(370),k=e.n(p),b=e(817),A=e.n(b);function m(a){try{return document.execCommand(a)}catch{return!1}}var h=function(o){var n=A()(o);return m("cut"),n},t=h;function l(a){var o=document.documentElement.getAttribute("dir")==="rtl",n=document.createElement("textarea");n.style.fontSize="12pt",n.style.border="0",n.style.padding="0",n.style.margin="0",n.style.position="absolute",n.style[o?"right":"left"]="-9999px";var i=window.pageYOffset||document.documentElement.scrollTop;return n.style.top="".concat(i,"px"),n.setAttribute("readonly",""),n.value=a,n}var y=function(o,n){var i=l(o);n.container.appendChild(i);var s=A()(i);return m("copy"),i.remove(),s},N=function(o){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{container:document.body},i="";return typeof o=="string"?i=y(o,n):o instanceof HTMLInputElement&&!["text","search","url","tel","password"].includes(o?.type)?i=y(o.value,n):(i=A()(o),m("copy")),i},H=N;function R(a){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?R=function(n){return typeof n}:R=function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},R(a)}var re=function(){var o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=o.action,i=n===void 0?"copy":n,s=o.container,d=o.target,O=o.text;if(i!=="copy"&&i!=="cut")throw new Error('Invalid "action" value, use either "copy" or "cut"');if(d!==void 0)if(d&&R(d)==="object"&&d.nodeType===1){if(i==="copy"&&d.hasAttribute("disabled"))throw new Error('Invalid "target" attribute. Please use "readonly" instead of "disabled" attribute');if(i==="cut"&&(d.hasAttribute("readonly")||d.hasAttribute("disabled")))throw new Error(`Invalid "target" attribute. You can't cut text from elements with "readonly" or "disabled" attributes`)}else throw new Error('Invalid "target" value, use a valid Element');if(O)return H(O,{container:s});if(d)return i==="cut"?t(d):H(d,{container:s})},ie=re;function j(a){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?j=function(n){return typeof n}:j=function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},j(a)}function se(a,o){if(!(a instanceof o))throw new TypeError("Cannot call a class as a function")}function Q(a,o){for(var n=0;n<o.length;n++){var i=o[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(a,i.key,i)}}function ae(a,o,n){return o&&Q(a.prototype,o),n&&Q(a,n),a}function ue(a,o){if(typeof o!="function"&&o!==null)throw new TypeError("Super expression must either be null or a function");a.prototype=Object.create(o&&o.prototype,{constructor:{value:a,writable:!0,configurable:!0}}),o&&z(a,o)}function z(a,o){return z=Object.setPrototypeOf||function(i,s){return i.__proto__=s,i},z(a,o)}function le(a){var o=de();return function(){var i=I(a),s;if(o){var d=I(this).constructor;s=Reflect.construct(i,arguments,d)}else s=i.apply(this,arguments);return ce(this,s)}}function ce(a,o){return o&&(j(o)==="object"||typeof o=="function")?o:fe(a)}function fe(a){if(a===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a}function de(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}function I(a){return I=Object.setPrototypeOf?Object.getPrototypeOf:function(n){return n.__proto__||Object.getPrototypeOf(n)},I(a)}function B(a,o){var n="data-clipboard-".concat(a);if(o.hasAttribute(n))return o.getAttribute(n)}var pe=function(a){ue(n,a);var o=le(n);function n(i,s){var d;return se(this,n),d=o.call(this),d.resolveOptions(s),d.listenClick(i),d}return ae(n,[{key:"resolveOptions",value:function(){var s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.action=typeof s.action=="function"?s.action:this.defaultAction,this.target=typeof s.target=="function"?s.target:this.defaultTarget,this.text=typeof s.text=="function"?s.text:this.defaultText,this.container=j(s.container)==="object"?s.container:document.body}},{key:"listenClick",value:function(s){var d=this;this.listener=k()(s,"click",function(O){return d.onClick(O)})}},{key:"onClick",value:function(s){var d=s.delegateTarget||s.currentTarget,O=this.action(d)||"copy",D=ie({action:O,container:this.container,target:this.target(d),text:this.text(d)});this.emit(D?"success":"error",{action:O,text:D,trigger:d,clearSelection:function(){d&&d.focus(),window.getSelection().removeAllRanges()}})}},{key:"defaultAction",value:function(s){return B("action",s)}},{key:"defaultTarget",value:function(s){var d=B("target",s);if(d)return document.querySelector(d)}},{key:"defaultText",value:function(s){return B("text",s)}},{key:"destroy",value:function(){this.listener.destroy()}}],[{key:"copy",value:function(s){var d=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{container:document.body};return H(s,d)}},{key:"cut",value:function(s){return t(s)}},{key:"isSupported",value:function(){var s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:["copy","cut"],d=typeof s=="string"?[s]:s,O=!!document.queryCommandSupported;return d.forEach(function(D){O=O&&!!document.queryCommandSupported(D)}),O}}]),n}(f()),me=pe},828:function(u){var r=9;if(typeof Element<"u"&&!Element.prototype.matches){var e=Element.prototype;e.matches=e.matchesSelector||e.mozMatchesSelector||e.msMatchesSelector||e.oMatchesSelector||e.webkitMatchesSelector}function c(f,p){for(;f&&f.nodeType!==r;){if(typeof f.matches=="function"&&f.matches(p))return f;f=f.parentNode}}u.exports=c},438:function(u,r,e){var c=e(828);function f(b,A,m,h,t){var l=k.apply(this,arguments);return b.addEventListener(m,l,t),{destroy:function(){b.removeEventListener(m,l,t)}}}function p(b,A,m,h,t){return typeof b.addEventListener=="function"?f.apply(null,arguments):typeof m=="function"?f.bind(null,document).apply(null,arguments):(typeof b=="string"&&(b=document.querySelectorAll(b)),Array.prototype.map.call(b,function(l){return f(l,A,m,h,t)}))}function k(b,A,m,h){return function(t){t.delegateTarget=c(t.target,A),t.delegateTarget&&h.call(b,t)}}u.exports=p},879:function(u,r){r.node=function(e){return e!==void 0&&e instanceof HTMLElement&&e.nodeType===1},r.nodeList=function(e){var c=Object.prototype.toString.call(e);return e!==void 0&&(c==="[object NodeList]"||c==="[object HTMLCollection]")&&"length"in e&&(e.length===0||r.node(e[0]))},r.string=function(e){return typeof e=="string"||e instanceof String},r.fn=function(e){var c=Object.prototype.toString.call(e);return c==="[object Function]"}},370:function(u,r,e){var c=e(879),f=e(438);function p(m,h,t){if(!m&&!h&&!t)throw new Error("Missing required arguments");if(!c.string(h))throw new TypeError("Second argument must be a String");if(!c.fn(t))throw new TypeError("Third argument must be a Function");if(c.node(m))return k(m,h,t);if(c.nodeList(m))return b(m,h,t);if(c.string(m))return A(m,h,t);throw new TypeError("First argument must be a String, HTMLElement, HTMLCollection, or NodeList")}function k(m,h,t){return m.addEventListener(h,t),{destroy:function(){m.removeEventListener(h,t)}}}function b(m,h,t){return Array.prototype.forEach.call(m,function(l){l.addEventListener(h,t)}),{destroy:function(){Array.prototype.forEach.call(m,function(l){l.removeEventListener(h,t)})}}}function A(m,h,t){return f(document.body,m,h,t)}u.exports=p},817:function(u){function r(e){var c;if(e.nodeName==="SELECT")e.focus(),c=e.value;else if(e.nodeName==="INPUT"||e.nodeName==="TEXTAREA"){var f=e.hasAttribute("readonly");f||e.setAttribute("readonly",""),e.select(),e.setSelectionRange(0,e.value.length),f||e.removeAttribute("readonly"),c=e.value}else{e.hasAttribute("contenteditable")&&e.focus();var p=window.getSelection(),k=document.createRange();k.selectNodeContents(e),p.removeAllRanges(),p.addRange(k),c=p.toString()}return c}u.exports=r},279:function(u){function r(){}r.prototype={on:function(e,c,f){var p=this.e||(this.e={});return(p[e]||(p[e]=[])).push({fn:c,ctx:f}),this},once:function(e,c,f){var p=this;function k(){p.off(e,k),c.apply(f,arguments)}return k._=c,this.on(e,k,f)},emit:function(e){var c=[].slice.call(arguments,1),f=((this.e||(this.e={}))[e]||[]).slice(),p=0,k=f.length;for(p;p<k;p++)f[p].fn.apply(f[p].ctx,c);return this},off:function(e,c){var f=this.e||(this.e={}),p=f[e],k=[];if(p&&c)for(var b=0,A=p.length;b<A;b++)p[b].fn!==c&&p[b].fn._!==c&&k.push(p[b]);return k.length?f[e]=k:delete f[e],this}},u.exports=r,u.exports.TinyEmitter=r}},E={};function w(u){if(E[u])return E[u].exports;var r=E[u]={exports:{}};return C[u](r,r.exports,w),r.exports}return function(){w.n=function(u){var r=u&&u.__esModule?function(){return u.default}:function(){return u};return w.d(r,{a:r}),r}}(),function(){w.d=function(u,r){for(var e in r)w.o(r,e)&&!w.o(u,e)&&Object.defineProperty(u,e,{enumerable:!0,get:r[e]})}}(),function(){w.o=function(u,r){return Object.prototype.hasOwnProperty.call(u,r)}}(),w(686)}().default})}(V)),V.exports}var $e=Se();const Ee=ye($e),xe=L=>({toClipboard(U,C){return new Promise((E,w)=>{const u=document.createElement("button"),r=new Ee(u,{text:()=>U,action:()=>"copy",container:C!==void 0?C:document.body});r.on("success",e=>{r.destroy(),E(e)}),r.on("error",e=>{r.destroy(),w(e)}),document.body.appendChild(u),u.click(),document.body.removeChild(u)})}}),Pe={class:"col-span-6 mb-4 sm:col-span-4"},Oe={key:0,class:"col-span-6"},Le={class:"mt-2 grid grid-cols-1 gap-4 md:grid-cols-2"},Ne={class:"flex items-center"},je={class:"ms-2 text-sm text-gray-600 dark:text-gray-400"},Me={key:0},Re={class:"mt-10 sm:mt-0"},Ie={class:"space-y-6"},De={class:"flex items-center"},Fe={key:0,class:"text-sm text-gray-400"},Ve=["onClick"],Ue=["onClick"],He={key:0,class:"mt-4 flex"},ze={class:"grid grid-cols-1 gap-4 md:grid-cols-2"},Be={class:"flex items-center"},Ye={class:"ms-2 text-sm text-gray-600 dark:text-gray-400"},ft={__name:"ApiTokenManager",props:{tokens:Array,availablePermissions:Array,defaultPermissions:Array},setup(L){const C=Y({name:"",permissions:L.defaultPermissions}),E=Y({permissions:[]}),w=Y({}),u=F(!1),r=F(null),e=F(null);ve(()=>C.permissions,async t=>{t.findIndex(l=>l==="write")>=0&&t.findIndex(l=>l==="read")<=-1&&C.permissions.push("read")});const c=()=>{C.post(route("api-tokens.store"),{preserveScroll:!0,onSuccess:()=>{u.value=!0,C.reset()}})},f=t=>{E.permissions=t.abilities,r.value=t},p=()=>{E.put(route("api-tokens.update",r.value),{preserveScroll:!0,preserveState:!0,onSuccess:()=>r.value=null})},k=t=>{e.value=t},b=()=>{w.delete(route("api-tokens.destroy",e.value),{preserveScroll:!0,preserveState:!0,onSuccess:()=>e.value=null})},A=F(!1),{toClipboard:m}=xe(),h=t=>{m(t).then(()=>{A.value=!0,setTimeout(()=>A.value=!1,2e3),ge(he("Value copied into your clipboard"))})};return(t,l)=>(P(),x("div",null,[_(Ce,{onSubmitted:c},{title:v(()=>[T(g(t.$t("Create API Token")),1)]),description:v(()=>[T(g(t.$t("API tokens allow third-party services to authenticate with our application on your behalf.")),1)]),form:v(()=>[$("div",Pe,[_(ne,{for:"name",value:t.$t("Token name (for your reference only)")},null,8,["value"]),_(Te,{id:"name",modelValue:S(C).name,"onUpdate:modelValue":l[0]||(l[0]=y=>S(C).name=y),type:"text",class:"mt-1 block w-full",autofocus:""},null,8,["modelValue"]),_(we,{message:S(C).errors.name,class:"mt-2"},null,8,["message"])]),L.availablePermissions.length>0?(P(),x("div",Oe,[_(ne,{for:"permissions",value:t.$t("Permissions")},null,8,["value"]),$("div",Le,[(P(!0),x(X,null,G(L.availablePermissions,y=>(P(),x("div",{key:y},[$("label",Ne,[_(te,{checked:S(C).permissions,"onUpdate:checked":l[1]||(l[1]=N=>S(C).permissions=N),value:y},null,8,["checked","value"]),$("span",je,g(y),1)])]))),128))])])):M("",!0)]),actions:v(()=>[_(Z,{on:S(C).recentlySuccessful,class:"me-3"},{default:v(()=>[T(g(t.$t("Created.")),1)]),_:1},8,["on"]),_(J,{class:q({"opacity-25":S(C).processing}),disabled:S(C).processing},{default:v(()=>[T(g(t.$t("Create")),1)]),_:1},8,["class","disabled"])]),_:1}),L.tokens.length>0?(P(),x("div",Me,[$("div",Re,[_(be,null,{title:v(()=>[T(g(t.$t("Manage API Tokens")),1)]),description:v(()=>[T(g(t.$t("You may delete any of your existing tokens if they are no longer needed.")),1)]),content:v(()=>[$("div",Ie,[(P(!0),x(X,null,G(L.tokens,y=>(P(),x("div",{key:y.id,class:"flex items-center justify-between"},[$("div",null,g(y.name),1),$("div",De,[y.last_used_ago?(P(),x("div",Fe,g(t.$t("Last used :date",{date:y.last_used_ago})),1)):M("",!0),L.availablePermissions.length>0?(P(),x("button",{key:1,class:"ms-6 cursor-pointer text-sm text-gray-400 underline",onClick:N=>f(y)},g(t.$t("Permissions")),9,Ve)):M("",!0),$("button",{class:"ms-6 cursor-pointer text-sm text-red-500",onClick:N=>k(y)},g(t.$t("Delete")),9,Ue)])]))),128))])]),_:1})])])):M("",!0),_(ee,{show:u.value,onClose:l[5]||(l[5]=y=>u.value=!1)},{title:v(()=>[T(g(t.$t("API Token")),1)]),content:v(()=>[$("div",null,g(t.$t("Please copy your new API token. For your security, it won’t be shown again.")),1),t.$page.props.jetstream.flash.token?(P(),x("div",He,[$("div",{class:"rounded-xs bg-gray-100 px-4 py-2 font-mono text-sm text-gray-500",onClick:l[2]||(l[2]=W(y=>h(t.$page.props.jetstream.flash.token),["prevent"]))},g(t.$page.props.jetstream.flash.token),1),_(J,{class:"ms-3",title:t.$t("Copy value into the clipboard"),onClick:l[3]||(l[3]=W(y=>h(t.$page.props.jetstream.flash.token),["prevent"]))},{default:v(()=>[T(g(t.$t("Copy")),1)]),_:1},8,["title"]),_(Z,{on:A.value,class:"px-2 py-2"},{default:v(()=>[T(g(t.$t("Copied.")),1)]),_:1},8,["on"])])):M("",!0)]),footer:v(()=>[_(K,{onClick:l[4]||(l[4]=y=>u.value=!1)},{default:v(()=>[T(g(t.$t("Close")),1)]),_:1})]),_:1},8,["show"]),_(ee,{show:r.value,onClose:l[8]||(l[8]=y=>r.value=null)},{title:v(()=>[T(g(t.$t("API Token Permissions")),1)]),content:v(()=>[$("div",ze,[(P(!0),x(X,null,G(L.availablePermissions,y=>(P(),x("div",{key:y},[$("label",Be,[_(te,{checked:S(E).permissions,"onUpdate:checked":l[6]||(l[6]=N=>S(E).permissions=N),value:y},null,8,["checked","value"]),$("span",Ye,g(y),1)])]))),128))])]),footer:v(()=>[_(K,{onClick:l[7]||(l[7]=y=>r.value=null)},{default:v(()=>[T(g(t.$t("Cancel")),1)]),_:1}),_(J,{class:q(["ms-3",{"opacity-25":S(E).processing}]),disabled:S(E).processing,onClick:p},{default:v(()=>[T(g(t.$t("Save")),1)]),_:1},8,["class","disabled"])]),_:1},8,["show"]),_(ke,{show:e.value,onClose:l[10]||(l[10]=y=>e.value=null)},{title:v(()=>[T(g(t.$t("Delete API Token")),1)]),content:v(()=>[T(g(t.$t("Are you sure you would like to delete this API token?")),1)]),footer:v(()=>[_(K,{onClick:l[9]||(l[9]=y=>e.value=null)},{default:v(()=>[T(g(t.$t("Cancel")),1)]),_:1}),_(_e,{class:q(["ms-3",{"opacity-25":S(w).processing}]),disabled:S(w).processing,onClick:b},{default:v(()=>[T(g(t.$t("Delete")),1)]),_:1},8,["class","disabled"])]),_:1},8,["show"])]))}};export{ft as default};
