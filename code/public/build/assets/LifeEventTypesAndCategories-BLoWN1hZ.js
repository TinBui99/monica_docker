import{r as k,B as x,e as Q,h as b,o as v,a as l,i as _,c as W,d as P,t as c,k as V,b as n,u as i,n as h,w as j,D as w,p as B}from"./app-CapNgXf-.js";import{d as U}from"./vuedraggable.umd-BpKQmSSe.js";import{P as C}from"./PrettyButton-C7IwNjfl.js";import{P as $}from"./PrettySpan-CCXc1kgI.js";import{T as H}from"./TextInput-C8RADZPb.js";import{E as L}from"./Errors-ClHFmp7Z.js";import{_ as X}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./createLucideIcon-jKXsEGte.js";const Y={class:"mb-12"},ee={class:"mb-3 mt-8 items-center justify-between sm:mt-0 sm:flex"},te={class:"mb-4 sm:mb-0"},le={class:"border-b border-gray-200 p-5 dark:border-gray-700"},ae={class:"flex justify-between p-5"},oe={key:1,class:"mb-6"},re={key:0},se={class:"item-list mb-2 rounded-lg border border-gray-200 bg-white py-2 pe-5 ps-4 hover:bg-slate-50 dark:border-gray-700 dark:bg-gray-900 dark:hover:bg-slate-800"},ne={class:"mb-3 flex items-center justify-between"},de={class:"me-2 flex"},ie={class:"text-sm"},ue=["onClick"],ve={class:"text-blue-500 hover:underline"},ce=["onClick"],pe={class:"ms-8"},fe={class:"mb-1 text-sm text-gray-500"},be={key:0},me={class:"item-list mb-2 rounded-lg border border-gray-200 bg-white py-2 pe-5 ps-4 hover:bg-slate-50 dark:border-gray-700 dark:bg-gray-900 dark:hover:bg-slate-800"},ye={class:"flex items-center justify-between"},ge={class:"me-2 flex"},he={class:"text-sm"},ke=["onClick"],_e={class:"text-blue-500 hover:underline"},Ve=["onClick"],Ce=["onSubmit"],xe={class:"border-b border-gray-200 p-5 dark:border-gray-700"},we={class:"flex justify-between p-5"},$e=["onClick"],He=["onSubmit"],Le={class:"border-b border-gray-200 p-5 dark:border-gray-700"},Ee={class:"flex justify-between p-5"},Me={key:2,class:"mb-6 rounded-lg border border-gray-200 bg-white dark:border-gray-700 dark:bg-gray-900"},Te={class:"p-5 text-center"},Ze=["onClick"],Ie=["onSubmit"],Se={class:"border-b border-gray-200 p-5 dark:border-gray-700"},Ne={class:"flex justify-between p-5"},Pe={__name:"LifeEventTypesAndCategories",props:{data:Object},setup(A){const E=A,s=k(""),m=k(!1),p=k(!1),u=k(0),y=k(0),g=k(0),d=k(E.data.life_event_categories),M=x("newLifeEventCategory"),T=x("renameLifeEventCategory"),Z=x("newLifeEventType"),I=x("renameLifeEventType"),o=Q({label:"",position:"",errors:[]}),R=()=>{o.label="",o.position="",m.value=!0,p.value=!1,u.value=0,y.value=0,g.value=0,w().then(()=>M.value.focus())},S=t=>{o.label="",o.position="",p.value=!0,u.value=t.id,y.value=0,g.value=0,m.value=!1,w().then(()=>Z.value.focus())},q=t=>{o.label=t.label,y.value=t.id,g.value=0,m.value=!1,p.value=!1,u.value=0,w().then(()=>T.value.focus())},D=t=>{o.label=t.label,g.value=t.id,m.value=!1,p.value=!1,y.value=0,u.value=0,w().then(()=>I.value.focus())},K=()=>{s.value="loading",axios.post(E.data.url.life_event_category_store,o).then(t=>{d.value.push(t.data.data),s.value=null,m.value=!1}).catch(t=>{s.value=null,o.errors=t.response.data})},z=t=>{s.value="loading",axios.put(t.url.update,o).then(e=>{d.value[d.value.findIndex(a=>a.id===t.id)]=e.data.data,s.value=null,y.value=0}).catch(e=>{s.value=null,o.errors=e.response.data})},F=t=>{confirm(B("Are you sure? This action cannot be undone."))&&axios.delete(t.url.destroy).then(()=>{var e=d.value.findIndex(a=>a.id===t.id);d.value.splice(e,1)}).catch(e=>{s.value=null,o.errors=e.response.data})},N=t=>{o.position=t.moved.newIndex+1,axios.post(t.moved.element.url.position,o).then(()=>{}).catch(e=>{s.value=null,o.errors=e.response.data})},O=t=>{s.value="loading",axios.post(t.url.store,o).then(e=>{var a=d.value.findIndex(r=>r.id===t.id);d.value[a].life_event_types.push(e.data.data),s.value=null,u.value=0,p.value=!1}).catch(e=>{s.value=null,o.errors=e.response.data})},G=t=>{s.value="loading",axios.put(t.url.update,o).then(e=>{var a=d.value.findIndex(f=>f.id===t.life_event_category_id),r=d.value[a].life_event_types.findIndex(f=>f.id===t.id);d.value[a].life_event_types[r]=e.data.data,s.value=null,u.value=0,g.value=0}).catch(e=>{s.value=null,o.errors=e.response.data})},J=t=>{confirm(B("Are you sure? This action cannot be undone."))&&axios.delete(t.url.destroy).then(()=>{var e=d.value.findIndex(r=>r.id===t.life_event_category_id),a=d.value[e].life_event_types.findIndex(r=>r.id===t.id);d.value[e].life_event_types.splice(a,1)}).catch(e=>{s.value=null,o.errors=e.response.data})};return(t,e)=>(v(),b("div",Y,[l("div",ee,[l("h3",te,[e[14]||(e[14]=l("span",{class:"me-1"}," ðŸ‘©â€ðŸ¼ ",-1)),P(" "+c(t.$t("Life event types and categories")),1)]),m.value?_("",!0):(v(),W(C,{key:0,text:t.$t("Add a life event category"),icon:"plus",onClick:R},null,8,["text"]))]),m.value?(v(),b("form",{key:0,class:"mb-6 rounded-lg border border-gray-200 bg-white dark:border-gray-700 dark:bg-gray-900",onSubmit:e[3]||(e[3]=V(a=>K(),["prevent"]))},[l("div",le,[n(L,{errors:i(o).errors},null,8,["errors"]),n(H,{ref_key:"newLifeEventCategory",ref:M,modelValue:i(o).label,"onUpdate:modelValue":e[0]||(e[0]=a=>i(o).label=a),label:t.$t("Name"),type:"text",autofocus:!0,"input-class":"block w-full",required:!0,autocomplete:!1,maxlength:255,onEscKeyPressed:e[1]||(e[1]=a=>m.value=!1)},null,8,["modelValue","label"])]),l("div",ae,[n($,{text:t.$t("Cancel"),class:h("me-3"),onClick:e[2]||(e[2]=a=>m.value=!1)},null,8,["text"]),n(C,{text:t.$t("Save"),state:s.value,icon:"plus",class:h("save")},null,8,["text","state"])])],32)):_("",!0),d.value.length>0?(v(),b("div",oe,[n(i(U),{modelValue:d.value,"onUpdate:modelValue":e[13]||(e[13]=a=>d.value=a),"item-key":"id","component-data":{name:"fade"},handle:".handle",onChange:N},{item:j(({element:a})=>[y.value!==a.id?(v(),b("div",re,[l("div",se,[l("div",ne,[l("div",de,[e[15]||(e[15]=l("svg",{class:"handle me-2 cursor-move",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[l("path",{d:"M7 7H9V9H7V7Z",fill:"currentColor"}),l("path",{d:"M11 7H13V9H11V7Z",fill:"currentColor"}),l("path",{d:"M17 7H15V9H17V7Z",fill:"currentColor"}),l("path",{d:"M7 11H9V13H7V11Z",fill:"currentColor"}),l("path",{d:"M13 11H11V13H13V11Z",fill:"currentColor"}),l("path",{d:"M15 11H17V13H15V11Z",fill:"currentColor"}),l("path",{d:"M9 15H7V17H9V15Z",fill:"currentColor"}),l("path",{d:"M11 15H13V17H11V15Z",fill:"currentColor"}),l("path",{d:"M17 15H15V17H17V15Z",fill:"currentColor"})],-1)),l("span",null,c(a.label),1)]),l("ul",ie,[l("li",{class:"inline cursor-pointer",onClick:r=>q(a)},[l("span",ve,c(t.$t("Rename")),1)],8,ue),l("li",{class:"ms-4 inline cursor-pointer text-red-500 hover:text-red-900",onClick:r=>F(a)},c(t.$t("Delete")),9,ce)])]),l("div",pe,[l("p",fe,c(t.$t("Life event types:")),1),n(i(U),{modelValue:a.life_event_types,"onUpdate:modelValue":r=>a.life_event_types=r,"item-key":"id","component-data":{name:"fade"},handle:".handle",onChange:N},{item:j(({element:r})=>[g.value!==r.id?(v(),b("div",be,[l("div",me,[l("div",ye,[l("div",ge,[e[16]||(e[16]=l("svg",{class:"handle me-2 cursor-move",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[l("path",{d:"M7 7H9V9H7V7Z",fill:"currentColor"}),l("path",{d:"M11 7H13V9H11V7Z",fill:"currentColor"}),l("path",{d:"M17 7H15V9H17V7Z",fill:"currentColor"}),l("path",{d:"M7 11H9V13H7V11Z",fill:"currentColor"}),l("path",{d:"M13 11H11V13H13V11Z",fill:"currentColor"}),l("path",{d:"M15 11H17V13H15V11Z",fill:"currentColor"}),l("path",{d:"M9 15H7V17H9V15Z",fill:"currentColor"}),l("path",{d:"M11 15H13V17H11V15Z",fill:"currentColor"}),l("path",{d:"M17 15H15V17H17V15Z",fill:"currentColor"})],-1)),l("span",null,c(r.label),1)]),l("ul",he,[l("li",{class:"inline cursor-pointer",onClick:f=>D(r)},[l("span",_e,c(t.$t("Rename")),1)],8,ke),l("li",{class:"ms-4 inline cursor-pointer text-red-500 hover:text-red-900",onClick:f=>J(r)},c(t.$t("Delete")),9,Ve)])])])])):(v(),b("form",{key:1,class:"mb-6 rounded-lg border border-gray-200 bg-white dark:border-gray-700 dark:bg-gray-900",onSubmit:V(f=>G(r),["prevent"])},[l("div",xe,[n(L,{errors:i(o).errors},null,8,["errors"]),n(H,{ref_key:"renameLifeEventType",ref:I,modelValue:i(o).label,"onUpdate:modelValue":e[4]||(e[4]=f=>i(o).label=f),label:t.$t("Name"),type:"text",autofocus:!0,"input-class":"block w-full",required:!0,autocomplete:!1,maxlength:255,onEscKeyPressed:e[5]||(e[5]=f=>g.value=0)},null,8,["modelValue","label"])]),l("div",we,[n($,{text:t.$t("Cancel"),class:h("me-3"),onClick:e[6]||(e[6]=f=>g.value=0)},null,8,["text"]),n(C,{text:t.$t("Rename"),state:s.value,icon:"check",class:h("save")},null,8,["text","state"])])],40,Ce))]),_:2},1032,["modelValue","onUpdate:modelValue"]),a.life_event_types.length!==0&&!p.value&&u.value!==a.id?(v(),b("span",{key:0,class:"inline cursor-pointer text-sm text-blue-500 hover:underline",onClick:r=>S(a)},c(t.$t("add a life event type")),9,$e)):_("",!0),p.value&&u.value===a.id?(v(),b("form",{key:1,class:"mb-6 rounded-lg border border-gray-200 bg-white dark:border-gray-700 dark:bg-gray-900",onSubmit:V(r=>O(a),["prevent"])},[l("div",Le,[n(L,{errors:i(o).errors},null,8,["errors"]),n(H,{ref_key:"newLifeEventType",ref:Z,modelValue:i(o).label,"onUpdate:modelValue":e[7]||(e[7]=r=>i(o).label=r),label:t.$t("Name"),type:"text",autofocus:!0,"input-class":"block w-full",required:!0,autocomplete:!1,maxlength:255,onEscKeyPressed:e[8]||(e[8]=r=>{p.value=!1,u.value=0})},null,8,["modelValue","label"])]),l("div",Ee,[n($,{text:t.$t("Cancel"),class:h("me-3"),onClick:e[9]||(e[9]=r=>{p.value=!1,u.value=0})},null,8,["text"]),n(C,{text:t.$t("Save"),state:s.value,icon:"plus",class:h("save")},null,8,["text","state"])])],40,He)):_("",!0),a.life_event_types.length===0&&!p.value&&u.value!==a.id?(v(),b("div",Me,[l("p",Te,[P(c(t.$t("No life event types yet."))+" ",1),l("span",{class:"block cursor-pointer text-sm text-blue-500 hover:underline",onClick:r=>S(a)},c(t.$t("add a life event type")),9,Ze)])])):_("",!0)])])])):(v(),b("form",{key:1,class:"item-list mb-2 rounded-lg border border-gray-200 hover:bg-slate-50 dark:border-gray-700 dark:bg-slate-900 dark:hover:bg-slate-800",onSubmit:V(r=>z(a),["prevent"])},[l("div",Se,[n(L,{errors:i(o).errors},null,8,["errors"]),n(H,{ref_key:"renameLifeEventCategory",ref:T,modelValue:i(o).label,"onUpdate:modelValue":e[10]||(e[10]=r=>i(o).label=r),label:t.$t("Name"),type:"text",autofocus:!0,"input-class":"block w-full",required:!0,autocomplete:!1,maxlength:255,onEscKeyPressed:e[11]||(e[11]=r=>y.value=0)},null,8,["modelValue","label"])]),l("div",Ne,[n($,{text:t.$t("Cancel"),class:h("me-3"),onClick:e[12]||(e[12]=V(r=>y.value=0,["prevent"]))},null,8,["text"]),n(C,{text:t.$t("Rename"),state:s.value,icon:"check",class:h("save")},null,8,["text","state"])])],40,Ie))]),_:1},8,["modelValue"])])):_("",!0)]))}},ze=X(Pe,[["__scopeId","data-v-262248db"]]);export{ze as default};
