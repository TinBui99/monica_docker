import{r as f,s as K,f as w,v as j,e as C,h as p,o as i,a as t,b as r,d as c,t as m,i as u,k as x,u as o,c as h,w as v,l as _,n as B}from"./app-CapNgXf-.js";import{_ as N}from"./Button-CeJKJvkU.js";import{_ as P}from"./Checkbox-BoR3ajDr.js";import{_ as U}from"./ValidationErrors-Bh0pe_80.js";import{T as $}from"./TextInput-C8RADZPb.js";import{P as A}from"./PrimaryButton-CmyTR9yD.js";import{p as E,_ as R}from"./WebauthnLogin-DujbDASG.js";import{_ as q}from"./AuthenticationCardLogo-DtgeKbFE.js";import F from"./Beta-v9rTwy6C.js";import M from"./ExternalProviders-BgUkYsoz.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./InputError-BapgdLlk.js";import"./WaitForKey-BYvq9w9Y.js";import"./createLucideIcon-jKXsEGte.js";import"./startAuthentication-BTaWR7aw.js";import"./ApplicationLogo-Dss_iDve.js";const T={class:"flex min-h-screen flex-col items-center bg-gray-100 pt-6 dark:bg-gray-900 sm:justify-center sm:pt-0"},I={class:"mb-2"},L={class:"mt-4 text-center text-xl text-gray-800 dark:text-gray-200"},O={class:B(["mt-6 mb-4 flex w-full flex-col overflow-hidden bg-white shadow-md/20 dark:shadow-md/80 dark:bg-gray-800 sm:max-w-4xl","rounded-lg md:flex-row border border-gray-100 dark:border-gray-600"])},W=["src","alt"],z={class:"w-full"},D={class:"px-6 pb-6 pt-8"},G={key:0,class:"mb-2 text-sm font-medium text-green-600 dark:text-green-400"},H={class:"mb-3"},J={class:"mb-3 relative"},Q={class:"mb-2 text-sm dark:text-gray-100",for:"password"},X={class:"mb-3 flex justify-between"},Y={for:"remember",class:"ms-2 text-sm text-gray-600 dark:text-gray-400"},Z={key:0,class:"px-6 block"},ee={class:"mb-3 block text-sm font-medium text-gray-700 dark:text-gray-300"},te={key:1,class:"px-6 py-6 text-l dark:text-gray-50"},ge={__name:"Login",props:{isSignupEnabled:Boolean,canResetPassword:Boolean,status:String,wallpaperUrl:String,providers:Object,publicKey:Object,userless:Boolean,autologin:Boolean,beta:Boolean},setup(a){const b=a,g=f(!1),n=f(null),y=f(!1),k=K(()=>n.value!==null&&b.autologin&&y.value||g.value);w(()=>b.publicKey,e=>{n.value=e}),j(()=>{n.value=b.publicKey,E().then(e=>{y.value=e})});const s=C({email:"",password:"",remember:!0});w(()=>b.publicKey,e=>{n.value=e});const V=()=>{s.transform(e=>({...e,remember:s.remember?"on":""})).post(route("login"),{onFinish:()=>s.reset("password")})},S=()=>{s.reset(),g.value=!0};return(e,l)=>(i(),p("div",T,[t("div",I,[r(q)]),r(F,{beta:a.beta},null,8,["beta"]),t("h1",L,[l[3]||(l[3]=t("span",{class:"me-2"}," ðŸ‘‹ ",-1)),c(" "+m(e.$t("Sign in to your account")),1)]),t("div",O,[t("img",{src:a.wallpaperUrl,class:"w-full hidden sm:w-10/12 md:block object-cover",alt:e.$t("Wallpaper")},null,8,W),t("div",z,[t("div",D,[r(U,{class:"mb-2"}),a.status?(i(),p("div",G,m(a.status),1)):u("",!0),t("form",{onSubmit:x(V,["prevent"]),class:"dark:text-gray-800"},[t("div",H,[r($,{modelValue:o(s).email,"onUpdate:modelValue":l[0]||(l[0]=d=>o(s).email=d),label:e.$t("Email"),type:"email","input-class":"block w-full",required:!0,autofocus:!0,autocomplete:"username webauthn",maxlength:255},null,8,["modelValue","label"])]),t("div",J,[t("label",Q,m(e.$t("Password")),1),a.canResetPassword?(i(),h(o(_),{key:0,href:e.route("password.request"),class:"text-sm text-blue-500 hover:underline absolute right-0"},{default:v(()=>[c(m(e.$t("Forgot your password?")),1)]),_:1},8,["href"])):u("",!0),r($,{id:"password",modelValue:o(s).password,"onUpdate:modelValue":l[1]||(l[1]=d=>o(s).password=d),type:"password","input-class":"block w-full",required:!0,autocomplete:"current-password",maxlength:255},null,8,["modelValue"])]),t("div",X,[t("div",null,[r(P,{id:"remember",checked:o(s).remember,"onUpdate:checked":l[2]||(l[2]=d=>o(s).remember=d),name:"remember"},null,8,["checked"]),t("label",Y,m(e.$t("Remember me")),1)]),r(A,{text:e.$t("Log in"),class:B("save ms-4")},null,8,["text"])])],32)]),a.userless||n.value?(i(),p("div",Z,[t("div",ee,[k.value?u("",!0):(i(),h(N,{key:0,class:"block",onClick:x(S,["prevent"])},{default:v(()=>[c(m(e.$t("Sign in with a passkey")),1)]),_:1}))]),k.value?(i(),h(R,{key:0,"public-key":n.value,remember:!0,autofill:!0},null,8,["public-key"])):u("",!0)])):u("",!0),a.isSignupEnabled?(i(),p("div",te,[c(m(e.$t("New to Monica?"))+" ",1),r(o(_),{href:e.route("register"),class:"text-blue-500 text-l hover:underline"},{default:v(()=>[c(m(e.$t("Create an account")),1)]),_:1},8,["href"])])):u("",!0)])]),r(M,{class:"mt-3 block px-6",providers:a.providers,remember:o(s).remember},null,8,["providers","remember"])]))}};export{ge as default};
